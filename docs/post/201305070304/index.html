<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="canonical" href="http://yut.hatenablog.com/entry/20130507/1367863440" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="google-site-verification" content="haibt4AEKoLJlBFYmXsLiGTEe4PSc23sIiAIeez8nJM">
  <meta name="generator" content="Hugo 0.55.4" />

  <title>じゃあ、いつRails始めるの？... 今でしょ！ &middot; Y&#39;s note</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://yutakikuchi.github.io/blog/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://yutakikuchi.github.io/blog/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://yutakikuchi.github.io/blog/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://yutakikuchi.github.io/blog/img/favicon.ico" type="image/x-icon" />

  
    
        <link rel="stylesheet" href="https://yutakikuchi.github.io/blog/css/my.css">
    
  
  
    
        <script src="https://yutakikuchi.github.io/blog/js/my.js"></script>
    
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://yutakikuchi.github.io/blog/">Y's note</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yutakikuchi.github.io/blog/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yutakikuchi.github.io/blog/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yutakikuchi.github.io/blog/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/yutakikuchi_" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://facebook.com/yuta.kikuchi.007" target="_blank"><i class="fa fa-facebook-square fa-fw"></i>Facebook</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="http://slideshare.net/https://www.slideshare.net/yutakikuchi58/" target="_blank"><i class="fa fa-slideshare fa-fw"></i>SlideShare</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/https://www.linkedin.com/in/%E4%BD%91%E5%A4%AA-%E8%8F%8A%E6%B1%A0-36291a44/" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/yutakikuchi" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2019. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>じゃあ、いつRails始めるの？... 今でしょ！</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2013 May 07, 03:04</time>
  </div>

  

  

  

</div>

  

<h2 id="ruby-じゃあ-いつrails始めるの-今でしょ">[Ruby] : じゃあ、いつRails始めるの？&hellip; 今でしょ！</h2>

<p><div class="amazlet-box"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873113865/yutakikuchi-22/"><img src="http://ecx.images-amazon.com/images/I/510wHZllZVL._SL160_.jpg" class="hatena-asin-detail-image" alt="実践 Rails ―強力なWebアプリケーションをすばやく構築するテクニック" title="実践 Rails ―強力なWebアプリケーションをすばやく構築するテクニック"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873113865/yutakikuchi-22/">実践 Rails ―強力なWebアプリケーションをすばやく構築するテクニック</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> Brad Ediger,<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B3%F4%BC%B0%B2%F1%BC%D2%A5%AF%A5%A4%A1%BC%A5%D7">株式会社クイープ</a></li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%E9%A5%A4%A5%EA%A1%BC%A5%B8%A5%E3%A5%D1%A5%F3">オライリージャパン</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2008/10/27</li><li><span class="hatena-asin-detail-label">メディア:</span> 大型本</li><li><span class="hatena-asin-detail-label">購入</span>: 7人 <span class="hatena-asin-detail-label">クリック</span>: 90回</li><li><a href="http://d.hatena.ne.jp/asin/4873113865/yutakikuchi-22" target="_blank">この商品を含むブログ (43件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<div class="section">
<h4>Index</h4>

<blockquote>
    
<ol>
<li>はじめに</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>のInstall</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>の基礎</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>の基礎文法</li>
</ol>
</blockquote>

</div>
<div class="section">
<h4>はじめに</h4>

<blockquote>
    <p><a href="http://dotinstall.com/lessons/basic_rails">Ruby on Rails入門 (全46回) - プログラミングならドットインストール</a> <a href="http://b.hatena.ne.jp/entry/dotinstall.com/lessons/basic_rails"><img src="http://b.hatena.ne.jp/entry/image/http://dotinstall.com/lessons/basic_rails" alt="はてなブックマーク - Ruby on Rails入門 (全46回) - プログラミングならドットインストール" border="0" /></a><br />
Pythonistaから<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rubyist">Rubyist</a>への鞍替えを試みている<a href='https://twitter.com/yutakikuc'>@yutakikuc</a>です。DotInstall等を通して<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby%20on%20Rails">Ruby on Rails</a>の基礎を学び中なので学習した内容をまとめていきます。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Yahoo%21">Yahoo!</a>勤務時代はWebFWを自作していた経験もありFWについてはある程度知識を持っている僕から見ても<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>はとても便利ものだということが直ぐに分かりますが、色々と自動的にやり過ぎてくれて理解が難しくもあったりします。このエントリー内容は超初歩的なものになるので、これから勉強したいという人向けに記述します。この記事の基礎となっているのはdotainstallです。dotainstallのlessonは全部で46回ありますが、#4,#5,#09〜#036を見ると良いと思います。</p>

</blockquote>

</div>
<div class="section">
<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>のInstall</h4>

<blockquote>
    
<div class="section">
<h5>環境</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>をInstallする環境はCentOS6.3です。</p>
<pre class="code" data-lang="" data-unlink>$ cat /etc/redhat-release 
CentOS release 6.3 (Final)</pre>
</div>
<div class="section">
<h5>RailsInstallに必要なPackageInstall</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>のInstallに必要なPackageを先にInstallしておきます。以下のPackageが無いと<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>のInstall時に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Error">Error</a>が大量に出力される可能性があります。</p>
<pre class="code" data-lang="" data-unlink>$ sudo yum install gcc zlib zlib-devel yaml openssl openssl-devel curl curl-devel sqlite sqlite-devel readline readline-devel mysql mysql-devel -y</pre>
</div>
<div class="section">
<h5>NodeのInstall</h5>
<p>後々に必要になるServerSideの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Javascript">Javascript</a>の実行環境としてNodeをInstallしておきます。<a class="keyword" href="http://d.hatena.ne.jp/keyword/yum">yum</a>からinstall出来なかったのでSourceを直接DownloadしてCompileします。※注意:<a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a> newでプロジェクトを作成した後にGemfileを修正してtherubyracerをinstallすればNodeは必要無くなります。</p>
<pre class="code" data-lang="" data-unlink>$ wget -N http://nodejs.org/dist/node-latest.tar.gz
$ tar xzf node-latest.tar.gz
$ cd node-v0.10.5
$ ./configure
$ make && sudo make install</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>のInstall</h5>
<p><a href="http://www.ruby-lang.org/ja/news/2013/02/24/ruby-2-0-0-p0-is-released/">Ruby 2.0.0-p0 リリース</a> <a href="http://b.hatena.ne.jp/entry/www.ruby-lang.org/ja/news/2013/02/24/ruby-2-0-0-p0-is-released/"><img src="http://b.hatena.ne.jp/entry/image/http://www.ruby-lang.org/ja/news/2013/02/24/ruby-2-0-0-p0-is-released/" alt="はてなブックマーク - Ruby 2.0.0-p0 リリース" border="0" /></a><br />
最新の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a> versionは2.0.0です。これをダウンロードしてinstallします。<a class="keyword" href="http://d.hatena.ne.jp/keyword/ruby">ruby</a> -vとgem -vでinstallを確認します。</p>
<pre class="code" data-lang="" data-unlink>$ wget "ftp://ftp.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p0.tar.gz"
$ tar xzf ruby-2.0.0-p0.tar.gz
$ ./configure
$ make && sudo make install
$ ruby -v
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-linux]
$ gem -v
2.0.0</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>のInstall</h5>
<p>gemでinstallするだけです。gemでのLibraryInstall先は標準の場合/usr/local/lib/<a class="keyword" href="http://d.hatena.ne.jp/keyword/ruby">ruby</a>/gems/になるので覚えておくと良いと思います。</p>
<pre class="code" data-lang="" data-unlink>$ sudo gem install rails
$ rails -v
Rails 3.2.13</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>の新しいProject作成と<a class="keyword" href="http://d.hatena.ne.jp/keyword/Webrick">Webrick</a>の起動</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>の新しいProjectを作成し、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>に同包されている<a class="keyword" href="http://d.hatena.ne.jp/keyword/Webrick">Webrick</a>を起動します。起動後にRailsProjectが動作することを確認します。これで一旦RailsInstallの説明は完了です。</p>
<pre class="code" data-lang="" data-unlink>$ rails new sample
  create  
  create  README.rdoc
  create  Rakefile
  create  config.ru
  create  .gitignore
  create  Gemfile
  create  app
  create  app/assets/images/rails.png
.......
  run  bundle install
.......
Your bundle is complete!

$ cd sample
$ rails s
=> Booting WEBrick
=> Rails 3.2.13 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2013-05-03 01:38:57] INFO  WEBrick 1.3.1
[2013-05-03 01:38:57] INFO  ruby 2.0.0 (2013-02-24) [x86_64-linux]
[2013-05-03 01:38:57] INFO  WEBrick::HTTPServer#start: pid=3729 port=3000

$ w3m "http://localhost:3000"
  &#8226; Browse the documentation

  □ Rails Guides
  □ Rails API
  □ Ruby core
  □ Ruby standard library

Welcome aboard

You’re riding Ruby on Rails!</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>の基礎</h4>

<blockquote>
    <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>は<a class="keyword" href="http://d.hatena.ne.jp/keyword/MVC">MVC</a>のFWです。</p>

<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> Command</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a> newで新しいプロジェクトを作成します。ここではプロジェクト名をsampleとします。--skip-bundleというオプションを付けることで既にinstallされているgemを新たに追加せずにプロジェクトを作成することができます。※注意:<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>のdefaultでのDBはsqlite3なので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/mysql">mysql</a>にしたい場合は-dオプションを付ける必要があります。</p>
<pre class="code" data-lang="" data-unlink>$ rails new sample
$ rails new sample -d mysql</pre><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a> generateでModel/Controllerを作成します。generateはgと省略することができます。ここでは名簿管理をするModelを作成します。Listという名前のmodelで名前と年齢を管理します。name:string age:integerはデータ型の定義です。</p>
<pre class="code" data-lang="" data-unlink>$ rails g model List name:string age:integer
  invoke  active_record
  create    db/migrate/20130503163317_create_lists.rb
  create    app/models/list.rb
  invoke    test_unit
  create      test/unit/list_test.rb
  create      test/fixtures/lists.yml</pre><p>Controllerの生成もModelと同じようにgenerate出来ます。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%BF%CC%BE%B5%AC%C2%A7">命名規則</a>ですがControllerは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%A3%BF%F4">複数</a>形、Modelは単数形にします。ControllerのgenerateでViewも作成されます。</p>
<pre class="code" data-lang="" data-unlink>$ rails g controller Lists
  create  app/controllers/list_controller.rb
  invoke  erb
  create    app/views/list
  invoke  test_unit
  create    test/controllers/list_controller_test.rb
  invoke  helper
  create    app/helpers/list_helper.rb
  invoke    test_unit
  create      test/helpers/list_helper_test.rb
  invoke  assets
  invoke    coffee
  create      app/assets/javascripts/list.js.coffee
  invoke    scss
  create      app/assets/stylesheets/list.css.scss</pre><p>generateで作成されたModelをmigrationします。DBへの反映は<span class="deco" style="color:#FF0000;">rake</span>コマンドを使います。</p>
<pre class="code" data-lang="" data-unlink>$ rake db:migrate
==  CreateLists: migrating ====================================================
-- create_table(:lists)
   -> 0.0045s
==  CreateLists: migrated (0.0046s) ===========================================</pre><p>URLのroutingを設定するにはconfig/routes.rbファイルを修正し、rakeコマンドで反映します。まずはroutes.rbにを以下のようにresources :listsを追加してrake routesコマンドで反映します。rake routesコマンドで生成された内容を見ても分かるようにURLのFormatとHTTPMethodで呼び出したい処理の切り替えができるようになっていて、綺麗な形式になっています。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synType">Sample</span>::<span class="synType">Application</span>.routes.draw <span class="synStatement">do</span>

  resources <span class="synConstant">:lists</span>
</pre><pre class="code" data-lang="" data-unlink>$ rake routes
lists GET    /lists(.:format)          lists#index
      POST   /lists(.:format)          lists#create
 new_list GET    /lists/new(.:format)      lists#new
edit_list GET    /lists/:id/edit(.:format) lists#edit
 list GET    /lists/:id(.:format)      lists#show
      PUT    /lists/:id(.:format)      lists#update
      DELETE /lists/:id(.:format)      lists#destroy</pre><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a> consoleで<a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a>のdebugを行います。下ではListに対してnameとageのデータを格納するための処理をdebugしています。処理を行った<a class="keyword" href="http://d.hatena.ne.jp/keyword/sql">sql</a>も表示されています。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink>$ rails console
irb(main):<span class="synConstant">002</span>:<span class="synConstant">0</span>> l = <span class="synType">List</span>.new(<span class="synConstant">:name</span> => <span class="synSpecial">'</span><span class="synConstant">Kikuchi</span><span class="synSpecial">'</span>, <span class="synConstant">:age</span> => <span class="synConstant">30</span> )
=> <span class="synComment">#<List id: nil, name: "Kikuchi", age: 30, created_at: nil, updated_at: nil></span>
irb(main):<span class="synConstant">003</span>:<span class="synConstant">0</span>> l.save
   (<span class="synConstant">0</span>.7ms)  <span class="synStatement">begin</span> transaction
  SQL (<span class="synConstant">68</span>.3ms)  <span class="synType">INSERT</span> <span class="synType">INTO</span> <span class="synSpecial">"</span><span class="synConstant">lists</span><span class="synSpecial">"</span> (<span class="synSpecial">"</span><span class="synConstant">age</span><span class="synSpecial">"</span>, <span class="synSpecial">"</span><span class="synConstant">created_at</span><span class="synSpecial">"</span>, <span class="synSpecial">"</span><span class="synConstant">name</span><span class="synSpecial">"</span>, <span class="synSpecial">"</span><span class="synConstant">updated_at</span><span class="synSpecial">"</span>) VALUES (<span class="synConstant">?,</span> <span class="synConstant">?,</span> <span class="synConstant">?,</span> <span class="synConstant">?)</span>  [[<span class="synSpecial">"</span><span class="synConstant">age</span><span class="synSpecial">"</span>, <span class="synConstant">30</span>], [<span class="synSpecial">"</span><span class="synConstant">created_at</span><span class="synSpecial">"</span>, <span class="synType">Fri</span>, <span class="synConstant">03</span> <span class="synType">May</span> <span class="synConstant">2013</span> <span class="synConstant">18</span>:<span class="synConstant">00</span>:<span class="synConstant">33</span> <span class="synType">UTC</span> +<span class="synConstant">00</span>:<span class="synConstant">00</span>], [<span class="synSpecial">"</span><span class="synConstant">name</span><span class="synSpecial">"</span>, <span class="synSpecial">"</span><span class="synConstant">Kikuchi</span><span class="synSpecial">"</span>], [<span class="synSpecial">"</span><span class="synConstant">updated_at</span><span class="synSpecial">"</span>, <span class="synType">Fri</span>, <span class="synConstant">03</span> <span class="synType">May</span> <span class="synConstant">2013</span> <span class="synConstant">18</span>:<span class="synConstant">00</span>:<span class="synConstant">33</span> <span class="synType">UTC</span> +<span class="synConstant">00</span>:<span class="synConstant">00</span>]]
   (<span class="synConstant">59</span>.5ms)  commit transaction
=> <span class="synConstant">true</span>
</pre><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a> dbconsole(<a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a> db)でdbへの格納が正常に行われているかどうかを確認します。</p>
<pre class="hljs sql" data-lang="sql" data-unlink>$ rails db
sqlite> .tables
lists              schema_migrations
sqlite> <span class="synStatement">select</span> * <span class="synSpecial">from</span> lists;
<span class="synConstant">1</span>|Kikuchi|<span class="synConstant">30</span>|<span class="synConstant">2013-05-03</span> <span class="synConstant">18</span>:<span class="synConstant">00</span>:<span class="synConstant">33</span>.<span class="synConstant">753423</span>|<span class="synConstant">2013-05-03</span> <span class="synConstant">18</span>:<span class="synConstant">00</span>:<span class="synConstant">33</span>.<span class="synConstant">753423</span>
sqlite> .exit
</pre><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a> destroyで作成したファイルを削除することが出来ます。destroyはdと省略することができます。</p>
<pre class="code" data-lang="" data-unlink>$ rails d model List
$ rails d controller Lists
$ rails d migration lists </pre><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a> serverで作成したプロジェクトを<a class="keyword" href="http://d.hatena.ne.jp/keyword/WebRick">WebRick</a>で確認できるようにします。serverはsと省略することができます。※<a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a> sは作成したプロジェクトの直下で実行する必要あります。</p>
<pre class="code" data-lang="" data-unlink>$ rails s</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>の日本語化と<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>の設定</h5>
<p>まずはbundle listで<a class="keyword" href="http://d.hatena.ne.jp/keyword/i18n">i18n</a>が入っていることを確認します。入っていればconfig/localesディレクトリに移動して、<a href="https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/ja.yml">rails-i18n/rails/locale/ja.yml at master · svenfuchs/rails-i18n · GitHub</a> <a href="http://b.hatena.ne.jp/entry/s/github.com/svenfuchs/rails-i18n/blob/master/rails/locale/ja.yml"><img src="http://b.hatena.ne.jp/entry/image/https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/ja.yml" alt="はてなブックマーク - rails-i18n/rails/locale/ja.yml at master · svenfuchs/rails-i18n · GitHub" border="0" /></a>のja.ymlファイルをdownloadします。</p>
<pre class="code" data-lang="" data-unlink>$ bundle list | grep i18n
  * i18n (0.6.4)
$ cd config/locales
$ wget "https://raw.github.com/svenfuchs/rails-i18n/master/rails/locale/ja.yml"
$ head ja.yml
ja:
  date:
abbr_day_names:
- 日
- 月
- 火
- 水
- 木
- 金
- 土</pre><p>downloadしたymlファイルを有効化するためにconfig/application.rbを修正します。日本語化を行うためにconfig.<a class="keyword" href="http://d.hatena.ne.jp/keyword/i18n">i18n</a>.default_locale = :jaに設定します。また<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>を<a class="keyword" href="http://d.hatena.ne.jp/keyword/utf-8">utf-8</a>にしたいのでconfig.encoding = '<a class="keyword" href="http://d.hatena.ne.jp/keyword/utf-8">utf-8</a>'を追記します。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">require</span> <span class="synType">File</span>.expand_path(<span class="synSpecial">'</span><span class="synConstant">../boot</span><span class="synSpecial">'</span>, <span class="synConstant">__FILE__</span>)

<span class="synPreProc">require</span> <span class="synSpecial">'</span><span class="synConstant">rails/all</span><span class="synSpecial">'</span>

<span class="synComment"># Require the gems listed in Gemfile, including any gems</span>
<span class="synComment"># you've limited to :test, :development, or :production.</span>
<span class="synType">Bundler</span>.require(<span class="synConstant">:default</span>, <span class="synType">Rails</span>.env)

<span class="synPreProc">module</span> <span class="synType">Sample</span>
  <span class="synPreProc">class</span> <span class="synType">Application</span> < <span class="synType">Rails</span>::<span class="synType">Application</span>
<span class="synComment"># Settings in config/environments/* take precedence over those specified here.</span>
<span class="synComment"># Application configuration should go into files in config/initializers</span>
<span class="synComment"># -- all .rb files in that directory are automatically loaded.</span>

<span class="synComment"># Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.</span>
<span class="synComment"># Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.</span>
<span class="synComment"># config.time_zone = 'Central Time (US & Canada)'</span>

<span class="synComment"># The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.</span>
<span class="synComment"># config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]</span>
config.encoding = <span class="synSpecial">'</span><span class="synConstant">utf-8</span><span class="synSpecial">'</span>
config.i18n.default_locale = <span class="synConstant">:ja</span> 
  <span class="synPreProc">end</span> 
<span class="synPreProc">end</span>
</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>のDirectory構成</h5>
<p>bundle installしたDirectoryの中身は以下のようになります。<br />
GemfileがProject全体のLibraryの管理などをするファイルです。ここを更新して必要なLibraryをinstallすることができます。<br />
app/models,views,controllersに<a class="keyword" href="http://d.hatena.ne.jp/keyword/mvc">mvc</a>ファイルをそれぞれ設置します。app/assetsにimg,<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a>,<a class="keyword" href="http://d.hatena.ne.jp/keyword/javascript">javascript</a>を設置します。<br />
config/application.rbにapplication全体の設定、config/database.ymlにdbの設定、urlの設定はroutes.rbに記述します。<br />
accesslogはlog/development.logに記録されます。</p>
<pre class="code" data-lang="" data-unlink>$ tree
.
├── Gemfile
├── Gemfile.lock
├── README.rdoc
├── Rakefile
├── app
│&#160;&#160; ├── assets
│&#160;&#160; │&#160;&#160; ├── images
│&#160;&#160; │&#160;&#160; │&#160;&#160; └── rails.png
│&#160;&#160; │&#160;&#160; ├── javascripts
│&#160;&#160; │&#160;&#160; │&#160;&#160; └── application.js
│&#160;&#160; │&#160;&#160; └── stylesheets
│&#160;&#160; │&#160;&#160;     └── application.css
│&#160;&#160; ├── controllers
│&#160;&#160; │&#160;&#160; └── application_controller.rb
│&#160;&#160; ├── helpers
│&#160;&#160; │&#160;&#160; └── application_helper.rb
│&#160;&#160; ├── mailers
│&#160;&#160; ├── models
│&#160;&#160; └── views
│&#160;&#160;     └── layouts
│&#160;&#160;         └── application.html.erb
├── config
│&#160;&#160; ├── application.rb
│&#160;&#160; ├── boot.rb
│&#160;&#160; ├── database.yml
│&#160;&#160; ├── environment.rb
│&#160;&#160; ├── environments
│&#160;&#160; │&#160;&#160; ├── development.rb
│&#160;&#160; │&#160;&#160; ├── production.rb
│&#160;&#160; │&#160;&#160; └── test.rb
│&#160;&#160; ├── initializers
│&#160;&#160; │&#160;&#160; ├── backtrace_silencers.rb
│&#160;&#160; │&#160;&#160; ├── inflections.rb
│&#160;&#160; │&#160;&#160; ├── mime_types.rb
│&#160;&#160; │&#160;&#160; ├── secret_token.rb
│&#160;&#160; │&#160;&#160; ├── session_store.rb
│&#160;&#160; │&#160;&#160; └── wrap_parameters.rb
│&#160;&#160; ├── locales
│&#160;&#160; │&#160;&#160; └── en.yml
│&#160;&#160; └── routes.rb
├── config.ru
├── db
│&#160;&#160; ├── development.sqlite3
│&#160;&#160; └── seeds.rb
├── doc
│&#160;&#160; └── README_FOR_APP
├── lib
│&#160;&#160; ├── assets
│&#160;&#160; └── tasks
├── log
│&#160;&#160; └── development.log
├── public
│&#160;&#160; ├── 404.html
│&#160;&#160; ├── 422.html
│&#160;&#160; ├── 500.html
│&#160;&#160; ├── favicon.ico
│&#160;&#160; ├── index.html
│&#160;&#160; └── robots.txt
├── script
│&#160;&#160; └── rails
├── test
│&#160;&#160; ├── fixtures
│&#160;&#160; ├── functional
│&#160;&#160; ├── integration
│&#160;&#160; ├── performance
│&#160;&#160; │&#160;&#160; └── browsing_test.rb
│&#160;&#160; ├── test_helper.rb
│&#160;&#160; └── unit
├── tmp
│&#160;&#160; ├── cache
│&#160;&#160; │&#160;&#160; └── assets
│&#160;&#160; ├── pids
│&#160;&#160; │&#160;&#160; └── server.pid
│&#160;&#160; ├── sessions
│&#160;&#160; └── sockets
└── vendor
├── assets
│&#160;&#160; ├── javascripts
│&#160;&#160; └── stylesheets
└── plugins

40 directories, 40 files</pre>
</div>
<div class="section">
<h5>Contollerの作成</h5>
<p>rake routesで表示された<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>をapp/controllers/lists_controller.rbに定義します。定義する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>はindex/create/new/edit/show/update/destroyですが、ここでは簡単な説明のため一覧表示のindexだけを説明します。newとcreateが少し定義がややこしいんですが、newは新規登録画面を呼び出し、createはnewからデータを受け取ってDBに格納する感じだそうです。<a class="keyword" href="http://d.hatena.ne.jp/keyword/ruby">ruby</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>定義はdef〜endでできるので、def indexを作成します。@listsのように<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>変数に格納したデータはview側で参照が出来ます。データをViewで呼び出すようにapp/views/lists/index.html.erbを定義します。定義したviewを閲覧するために<a class="keyword" href="http://d.hatena.ne.jp/keyword/w3m">w3m</a>コマンドで<a href="http://localhost:3000/lists">http://localhost:3000/lists</a>にアクセスすると想定していたデータが取得出来ました。またlogs/development.logに<a class="keyword" href="http://d.hatena.ne.jp/keyword/access">access</a>や<a class="keyword" href="http://d.hatena.ne.jp/keyword/error">error</a>のlogが記録されます。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">ListsController</span> < <span class="synType">ApplicationController</span>

   <span class="synPreProc">def</span> <span class="synIdentifier">index</span>
  <span class="synComment">#modelは単数形なのでList それを全て取得する</span>
  <span class="synIdentifier">@lists</span> = <span class="synType">List</span>.all
   <span class="synPreProc">end</span>

<span class="synPreProc">end</span>
</pre><pre class="hljs ruby" data-lang="ruby" data-unlink><% <span class="synIdentifier">@lists</span>.each <span class="synStatement">do</span> |<span class="synIdentifier">list</span>| %>
<li><span class="synType">Name</span> : <%= list.name %>  <span class="synType">Age</span> : <%= list.age %></li>
<% <span class="synStatement">end</span> %>
</pre><pre class="code" data-lang="" data-unlink>$ w3m "http://localhost:3000/lists"
Name : Kikuchi Age : 30

$ tail logs/development.log
Started GET "/lists" for 127.0.0.1 at 2013-05-04 03:28:45 +0900
Processing by ListsController#index as HTML
  ^[[1m^[[35mList Load (0.2ms)^[[0m  SELECT "lists".* FROM "lists"
  Rendered lists/index.html.erb within layouts/application (5.3ms)
Completed 200 OK in 16ms (Views: 14.1ms | ActiveRecord: 0.2ms)</pre><p>Viewの中では<% %>、<%= %>などの<a class="keyword" href="http://d.hatena.ne.jp/keyword/ruby">ruby</a>を埋め込むためのERB記号やhelperとしての便利<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>が用意されています。標準でのhelperはgemで<a class="keyword" href="http://d.hatena.ne.jp/keyword/actionpack">actionpack</a>というLibraryをinstallした時点で/usr/local/lib/<a class="keyword" href="http://d.hatena.ne.jp/keyword/ruby">ruby</a>/gems/2.0.0/gems/<a class="keyword" href="http://d.hatena.ne.jp/keyword/actionpack">actionpack</a>-4.0.0.rc1/lib/action_view/helpers/に様々なhelperが追加されます。link_toという<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>はurl_helper.rbというファイルに定義されています。また自分でhelperを追加したい場合はapp/helpers/application_helper.rb にdef〜endで定義します。<br />
list_pathというようなものはhelperは自動的に定義されるようです。<action名>_pathとすることでactionに関するURLを生成してくれます。更に<method名>_<action名>_pathなどのControllerで定義したメソッドのURLも呼び出す事ができます。その他のViewに関する使い方は以下のページが参考になると思います。<a href="http://railsdoc.com/view">ビュー(view) - Railsドキュメント</a> <a href="http://b.hatena.ne.jp/entry/railsdoc.com/view"><img src="http://b.hatena.ne.jp/entry/image/http://railsdoc.com/view" alt="はてなブックマーク - ビュー(view) - Railsドキュメント" border="0" /></a></p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><% %>    <span class="synComment">#rubyの命令が使える。</span>
<%= 文字列 %>  <span class="synComment">#実体参照系でescapeを行った上で表示する。</span>
<%= 文字列.html_safe %>  <span class="synComment">#escapeせずに出力する場合</span>
<%== 文字列 %>  <span class="synComment">#escapeせずに出力する場合</span>
<%= link_to <span class="synSpecial">'</span><span class="synConstant">home</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">/</span><span class="synSpecial">'</span> %>  <span class="synComment">#linkを生成</span>
<%= link_to <span class="synSpecial">'</span><span class="synConstant">list</span><span class="synSpecial">'</span>, list_path(list) %>   <span class="synComment">#listへのリンクを生成</span>
<%= link_to <span class="synSpecial">'</span><span class="synConstant">new</span><span class="synSpecial">'</span>, new_list_path() %> <span class="synComment">#newへのリンクを生成</span>
<%= image_tag(<span class="synSpecial">"</span><span class="synConstant">image.png</span><span class="synSpecial">"</span>,<span class="synConstant">:size</span>=><span class="synSpecial">"</span><span class="synConstant">50x50</span><span class="synSpecial">"</span>,<span class="synConstant">:alt</span>=><span class="synSpecial">"</span><span class="synConstant">画像</span><span class="synSpecial">"</span>) %> <span class="synComment">#画像を埋め込み 引数でsizeとaltを指定できる。</span>
</pre><pre class="hljs ruby" data-lang="ruby" data-unlink>      <span class="synPreProc">def</span> <span class="synIdentifier">link_to</span>(name = <span class="synConstant">nil</span>, options = <span class="synConstant">nil</span>, html_options = <span class="synConstant">nil</span>, &block)
    html_options, options = options, name <span class="synStatement">if</span> block_given?
    options ||= {}

    html_options = convert_options_to_data_attributes(options, html_options)

    url = url_for(options)
    html_options[<span class="synSpecial">'</span><span class="synConstant">href</span><span class="synSpecial">'</span>] ||= url 

    content_tag(<span class="synConstant">:a</span>, name || url, html_options, &block)
  <span class="synPreProc">end</span> 
</pre>
</div>
<div class="section">
<h5>ModelにValidationを設定</h5>
<p>値のCheckを行いたい場合はValidatesを使うことができます。ValidatesはModelに仕込みます。Validatesに関しては以下のページに詳しく説明が載っています。<a href="http://guides.rubyonrails.org/active_record_validations_callbacks.html">Ruby on Rails Guides: Active Record Validations and Callbacks</a> <a href="http://b.hatena.ne.jp/entry/guides.rubyonrails.org/active_record_validations_callbacks.html"><img src="http://b.hatena.ne.jp/entry/image/http://guides.rubyonrails.org/active_record_validations_callbacks.html" alt="はてなブックマーク - Ruby on Rails Guides: Active Record Validations and Callbacks" border="0" /></a></p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">List</span> < <span class="synType">ActiveRecord</span>::<span class="synType">Base</span>
   
   validates <span class="synConstant">:name</span>, <span class="synConstant">:presence</span> => <span class="synConstant">true</span>   <span class="synComment">#nameは必須とする</span>
   validates <span class="synConstant">:age</span>,  <span class="synConstant">:presence</span> => <span class="synConstant">true</span>, <span class="synConstant">:length</span> => {<span class="synConstant">:maxinum</span> => <span class="synConstant">3</span> }  <span class="synComment">#ageは必須で、最大の長さは3とする</span>

<span class="synPreProc">end</span>
</pre>
</div>
<div class="section">
<h5>sqlite3からMysqlへのmigration</h5>
<p>RailsのDefaultDBはsqlite3です。rails newの説明でも書きましたがMysqlを使用したい場合はオプションでdatabaseをMysqlに変更する必要があります。もし途中からMysqlに変更したくなった場合の方法をここでは記載します。まずはsqlite3のdataをymlファイルとしてdumpします。そのためにはGemfileにgem 'yaml_db'を追記してbundle installします。dumpする実行コマンドはrake db:dumpです。次にconfig/database.ymlをsqlite3からmysql2に変更します。最後にdumpしたファイルをrake db:loadしてデータのmigraionは完了になります。</p>
<pre class="code" data-lang="" data-unlink>$ vi Gemfile # gem 'yaml_db',  gem 'mysql2'を追記
$ rake db:dump
$ vi config/database.yml  #sqlite3→mysql2に変更
development:
  adapter: mysql2
  pool: 5
  timeout: 5000
  username: "root"
  password: ""
  database: "lists"
  socket: /var/lib/mysql/mysql.sock 
$ rake db:load
-- create_table("lists", {:force=>true})
   -> 0.1321s
-- initialize_schema_migrations_table()
   -> 0.0572s
-- assume_migrated_upto_version(20130504004202, ["/home/yuta/work/rails/sample/db/migrate"])
   -> 0.0283s</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4>Rubyの基礎文法</h4>

<blockquote>
    <p>Rubyの基礎文法についてもまとめを書いておきます。文法が少しPythonに似ているところもあってPythonistaとしてはRubyはとても学習しやすい言語だと感じました。</p>

<div class="section">
<h5>CommentOut</h5>
<p>単数行は#、複数行は=begin,=endで囲みます。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment">=begin</span>
<span class="synComment">print "Hello World!" #改行無しで出力</span>
<span class="synComment">=end</span>
</pre>
</div>
<div class="section">
<h5>オブジェクト指向</h5>
<p>rubyでは全てをオブジェクトで扱うと考えます。オブジェクトとはデータとメソッドを持つ型です。メソッドはデータ.メソッド()のように記述します。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

puts  <span class="synSpecial">"</span><span class="synConstant">Hello World!</span><span class="synSpecial">"</span>.length()  <span class="synComment"># Hello World!という文字列オブジェクトに対してlengthメソッドがある。出力は12</span>
puts  length( <span class="synSpecial">"</span><span class="synConstant">Hello World!</span><span class="synSpecial">"</span> ) <span class="synComment"># error</span>
</pre>
</div>
<div class="section">
<h5>出力の違い</h5>
<p>以下ではprint,puts,pの違いを書きます。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

print <span class="synSpecial">"</span><span class="synConstant">Hello World!</span><span class="synSpecial">"</span> <span class="synComment">#改行無しで出力</span>
puts <span class="synSpecial">"</span><span class="synConstant">Hello World!</span><span class="synSpecial">"</span>  <span class="synComment">#改行ありで出力</span>
p <span class="synSpecial">"</span><span class="synConstant">Hello World!</span><span class="synSpecial">"</span>       <span class="synComment">#データの型を明示して出力</span>
</pre>
</div>
<div class="section">
<h5>破壊的メソッド</h5>
<p>破壊的メソッドは変数を上書きしてしまう仕組みです。以下の例を見たほうが分かりやすいと思います。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment">#破壊的メソッド</span>
s = <span class="synSpecial">"</span><span class="synConstant">Hello World!</span><span class="synSpecial">"</span>
puts s.chop      <span class="synComment">#sは上書きされず、Hello Worldが出力される。</span>
puts s               <span class="synComment">#sは上書きされていないので、Hello World!が出力される。</span>
puts s.chop!     <span class="synComment">#sは上書きされていて、Hello Worldが出力される。</span>
puts s               <span class="synComment">#sは上書きされていて、Hello Worldが出力される。</span>
</pre>
</div>
<div class="section">
<h5>文字列追記</h5>
<p>書き方が幾つかあります。少し調べてみたところ+=は処理コストが大きいようなので、それ以外を選択するのが良いと思います。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment">#文字列の追記</span>
s = <span class="synSpecial">"</span><span class="synConstant">Hello World!</span><span class="synSpecial">"</span>
s << <span class="synSpecial">"</span><span class="synConstant"> New World!</span><span class="synSpecial">"</span>          <span class="synComment"># << による追記</span>
s += <span class="synSpecial">"</span><span class="synConstant"> Next World!</span><span class="synSpecial">"</span>         <span class="synComment"># += による追記</span>
s.concat( <span class="synSpecial">"</span><span class="synConstant"> Last World!</span><span class="synSpecial">"</span> )  <span class="synComment"># concat による追記</span>
puts s
</pre>
</div>
<div class="section">
<h5>文字列検索</h5>
<p>index,includeメソッドで文字列に特定の文字が含まれるか検索できます。indexは検索文字の位置を特定、includeはtrue/falseを取得出来ます。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment">#文字列の検索</span>
s = <span class="synSpecial">"</span><span class="synConstant">Hello World!</span><span class="synSpecial">"</span>
puts s.index( <span class="synSpecial">"</span><span class="synConstant">llo</span><span class="synSpecial">"</span> )      <span class="synComment">#文字列が現れる位置を出力 結果は2</span>
puts s.include?( <span class="synSpecial">"</span><span class="synConstant">foo</span><span class="synSpecial">"</span> ) <span class="synComment">#文字列が含まれるかどうかをtrue/falseで返す。結果はfalse</span>
</pre>
</div>
<div class="section">
<h5>文字列の置換</h5>
<p>最初の文字列だけを置換する場合はsub、文字列全てを置換する場合はgsubを利用します。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment">#文字列の置換</span>
s = <span class="synSpecial">"</span><span class="synConstant">foo foo bar</span><span class="synSpecial">"</span>
puts s.sub( <span class="synSpecial">"</span><span class="synConstant">foo</span><span class="synSpecial">"</span>, <span class="synSpecial">"</span><span class="synConstant">bar</span><span class="synSpecial">"</span> )    <span class="synComment">#最初の文字列を置換</span>
puts s.gsub( <span class="synSpecial">"</span><span class="synConstant">foo</span><span class="synSpecial">"</span>, <span class="synSpecial">"</span><span class="synConstant">bar</span><span class="synSpecial">"</span> )  <span class="synComment">#文字列全てを置換</span>
</pre>
</div>
<div class="section">
<h5>配列</h5>
<p>配列の定義は[]の中にカンマで区切ります。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment">#配列の定義</span>
values = [<span class="synConstant">1</span>,<span class="synConstant">2</span>,<span class="synConstant">3</span>,<span class="synConstant">4</span>,<span class="synConstant">5</span>]
puts values        <span class="synComment">#配列の中身全てを出力</span>
puts values[<span class="synConstant">2</span>..<span class="synConstant">3</span>]  <span class="synComment">#配列の添字が2〜3を出力</span>
puts values[<span class="synConstant">2</span>...<span class="synConstant">3</span>] <span class="synComment">#配列の添字が2〜3で、最後の中身を含めずに出力</span>
puts values[<span class="synConstant">0</span>]     <span class="synComment">#最初の要素を出力</span>
puts values[<span class="synConstant">-1</span>]    <span class="synComment">#最後の要素を出力</span>
</pre>
</div>
<div class="section">
<h5>配列操作</h5>
<p>配列の要素を操作するunshift/push/shift/pop/uniq/sort/joinを説明します。unshiftで先頭に要素を追加、pushで末尾に要素を追加、shiftで先頭から要素を取り出す、popで末尾から要素を取り出す、uniqで重複削除、sortで昇順にsort.reverseで降順に並び替え、joinで要素を結合する事ができます。またinclude?で要素が含まれるかをtrue/falseで確認することができます。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment">#配列の操作</span>
values = [<span class="synConstant">1</span>,<span class="synConstant">2</span>,<span class="synConstant">3</span>,<span class="synConstant">4</span>,<span class="synConstant">5</span>]
puts values.shift     <span class="synComment">#先頭から要素を取り出す</span>
puts values.pop       <span class="synComment">#末尾から要素を取り出す</span>
values.unshift(<span class="synConstant">0</span>)     <span class="synComment">#先頭に要素を追加する</span>
values.push(<span class="synConstant">6</span>)        <span class="synComment">#末尾に要素を追加する</span>
values.push(<span class="synConstant">0</span>)
puts values.uniq      <span class="synComment">#配列の要素をuniq</span>
puts values.push(<span class="synConstant">1</span>).sort <span class="synComment">#配列の要素をsort </span>
puts values.sort.reverse <span class="synComment">#配列の要素を降順にsort</span>

<span class="synComment">#配列の要素をチェック</span>
<span class="synStatement">if</span> values.include?(<span class="synConstant">6</span>)
   puts <span class="synSpecial">"</span><span class="synConstant">6 is exist</span><span class="synSpecial">"</span>
<span class="synStatement">end</span>

<span class="synComment">#配列の要素を結合</span>
puts values.join( <span class="synSpecial">"</span><span class="synConstant"> and </span><span class="synSpecial">"</span> )
</pre>
</div>
<div class="section">
<h5>連想配列の定義</h5>
<p>連想配列の定義は{}とkey/value間は=>で定義します。each文で定義したkey/valueを抽出でき、has_key,has_valueでkey/valueの存在を確認する事ができます。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment"># 連想配列</span>
scores = { <span class="synSpecial">"</span><span class="synConstant">KIKUCHI</span><span class="synSpecial">"</span>=><span class="synConstant">100</span>, <span class="synSpecial">"</span><span class="synConstant">TANAKA</span><span class="synSpecial">"</span>=><span class="synConstant">70</span>, <span class="synSpecial">"</span><span class="synConstant">KATO</span><span class="synSpecial">"</span>=><span class="synConstant">30</span> }
scores.each <span class="synStatement">do</span> |<span class="synIdentifier">key</span>,<span class="synIdentifier">value</span>|
   puts <span class="synSpecial">"#{</span>key<span class="synSpecial">}</span><span class="synConstant">'s score is </span><span class="synSpecial">#{</span>value<span class="synSpecial">}"</span>
<span class="synStatement">end</span>

key = <span class="synSpecial">"</span><span class="synConstant">KIKUCHI</span><span class="synSpecial">"</span>
<span class="synStatement">if</span> scores.has_key?(key)
   puts <span class="synSpecial">"#{</span>key<span class="synSpecial">}</span><span class="synConstant">' key is exist</span><span class="synSpecial">"</span>
<span class="synStatement">else</span>
   puts <span class="synSpecial">"#{</span>key<span class="synSpecial">}</span><span class="synConstant">' key is not exist</span><span class="synSpecial">"</span>
<span class="synStatement">end</span>

value = <span class="synConstant">50</span>
<span class="synStatement">if</span> scores.has_value?(<span class="synConstant">50</span>)
   puts <span class="synSpecial">"#{</span>value<span class="synSpecial">}</span><span class="synConstant"> is exist</span><span class="synSpecial">"</span>
<span class="synStatement">else</span>
   puts <span class="synSpecial">"#{</span>value<span class="synSpecial">}</span><span class="synConstant"> is not exist</span><span class="synSpecial">"</span>
<span class="synStatement">end</span>
</pre>
</div>
<div class="section">
<h5>制御文法</h5>
<p>ここではif/for/while/times/eachについて書きます。制御文はif/for/while〜endで定義します。繰り返しの方法にはその他timesやeachがあり、eachは連想配列のkey/valueを参照するときに使えると思います。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment"># 制御文法</span>
<span class="synComment">## 制御文法はif/for/while等〜endとして定義する</span>
str = <span class="synSpecial">"</span><span class="synConstant">Hello World!</span><span class="synSpecial">"</span>
<span class="synComment"># if</span>
<span class="synStatement">if</span> str.include?(<span class="synSpecial">"</span><span class="synConstant">!</span><span class="synSpecial">"</span>)
   puts <span class="synSpecial">"</span><span class="synConstant">str includes !</span><span class="synSpecial">"</span>
<span class="synStatement">end</span>

<span class="synComment">## 以下全部10回繰り返す</span>
<span class="synComment"># for</span>
<span class="synStatement">for</span> i <span class="synStatement">in</span> <span class="synConstant">1</span>..<span class="synConstant">10</span> <span class="synStatement">do</span>
  puts <span class="synSpecial">"</span><span class="synConstant">Hello World! </span><span class="synSpecial">#{</span>i<span class="synSpecial">}"</span> 
<span class="synStatement">end</span>

<span class="synComment"># each</span>
data = <span class="synConstant">1</span>..<span class="synConstant">10</span>
data.each <span class="synStatement">do</span> |<span class="synIdentifier">i</span>|
  puts <span class="synSpecial">"</span><span class="synConstant">Hello World! </span><span class="synSpecial">#{</span>i<span class="synSpecial">}"</span> 
<span class="synStatement">end</span>

<span class="synComment"># while</span>
i = <span class="synConstant">1</span>
<span class="synStatement">while</span> i <= <span class="synConstant">10</span> <span class="synStatement">do</span>
  puts <span class="synSpecial">"</span><span class="synConstant">Hello World! </span><span class="synSpecial">#{</span>i<span class="synSpecial">}"</span>
  i+=<span class="synConstant">1</span> 
<span class="synStatement">end</span>

<span class="synComment"># times</span>
<span class="synConstant">10</span>.times <span class="synStatement">do</span> |<span class="synIdentifier">i</span>|
  puts <span class="synSpecial">"</span><span class="synConstant">Hello World! </span><span class="synSpecial">#{</span>i+<span class="synConstant">1</span><span class="synSpecial">}"</span>
<span class="synStatement">end</span> 

<span class="synComment">## 連想配列の繰り返し</span>
scores = { <span class="synSpecial">"</span><span class="synConstant">KIKUCHI</span><span class="synSpecial">"</span> => <span class="synConstant">100</span>, <span class="synSpecial">"</span><span class="synConstant">TANAKA</span><span class="synSpecial">"</span> => <span class="synConstant">70</span>, <span class="synSpecial">"</span><span class="synConstant">KATO</span><span class="synSpecial">"</span> => <span class="synConstant">30</span>  }
scores.each <span class="synStatement">do</span> |<span class="synIdentifier">key</span>,<span class="synIdentifier">value</span>|
   puts <span class="synSpecial">"#{</span>key<span class="synSpecial">}</span><span class="synConstant">'s score is </span><span class="synSpecial">#{</span>value<span class="synSpecial">}"</span>
<span class="synStatement">end</span>
</pre>
</div>
<div class="section">
<h5>メソッドの定義</h5>
<p>新たにメソッドを追加したい場合はdef〜endで定義します。当然returnで値を返すこともできます。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment">#出力メソッドを新たに定義</span>
<span class="synPreProc">def</span> <span class="synIdentifier">echo</span>( word = <span class="synSpecial">"</span><span class="synConstant">foo</span><span class="synSpecial">"</span> )
   puts word,word
<span class="synPreProc">end</span>

<span class="synComment">#10で割り切れるかを確認するメソッド</span>
<span class="synPreProc">def</span> <span class="synIdentifier">div10</span>( value )
  <span class="synStatement">if</span> value % <span class="synConstant">10</span> == <span class="synConstant">0</span>
<span class="synStatement">return</span> <span class="synConstant">true</span>
  <span class="synStatement">else</span>
<span class="synStatement">return</span> <span class="synConstant">false</span>  
  <span class="synStatement">end</span>
<span class="synPreProc">end</span>

echo( <span class="synSpecial">"</span><span class="synConstant">Hello World!</span><span class="synSpecial">"</span> )
puts div10( <span class="synConstant">3</span> )
puts div10( <span class="synConstant">10</span> )
</pre>
</div>
<div class="section">
<h5>Classの定義</h5>
<p>Classの定義はClass〜endで行います。また継承も使うことができて 継承したいClass < 継承元Classのように行います。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/usr/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>

<span class="synComment"># AnimalClassを定義</span>
<span class="synPreProc">class</span> <span class="synType">Animal</span>
   <span class="synPreProc">def</span> <span class="synIdentifier">initialize</span>(name)
  <span class="synIdentifier">@name</span> = name
   <span class="synPreProc">end</span> 
   <span class="synPreProc">def</span> <span class="synIdentifier">echo</span>(word)
  puts word
   <span class="synPreProc">end</span> 
<span class="synPreProc">end</span>

<span class="synComment"># AnimalClassを継承するDogClassを定義</span>
<span class="synPreProc">class</span> <span class="synType">Dog</span> < <span class="synType">Animal</span>
   <span class="synPreProc">def</span> <span class="synIdentifier">run</span> 
  puts <span class="synIdentifier">@name</span> + <span class="synSpecial">"</span><span class="synConstant"> is running!</span><span class="synSpecial">"</span>
   <span class="synPreProc">end</span> 
<span class="synPreProc">end</span>

pochi = <span class="synType">Dog</span>.new( <span class="synSpecial">"</span><span class="synConstant">pochi</span><span class="synSpecial">"</span> )
pochi.run
pochi.echo(<span class="synSpecial">"</span><span class="synConstant">wanwan</span><span class="synSpecial">"</span>)
</pre>
</div>
</blockquote>

</div>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://yutakikuchi.github.io/blog/post/201304261239/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://yutakikuchi.github.io/blog/post/201304261239/">MongoDBの集計機能が便利過ぎて泣けてくるお話し</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://yutakikuchi.github.io/blog/post/201305200832/">10分でFuelPHPの基礎を理解する</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://yutakikuchi.github.io/blog/post/201305200832/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="https://yutakikuchi.github.io/blog/js/ui.js"></script>
<script src="https://yutakikuchi.github.io/blog/js/menus.js"></script>


<script>
  
  if (window.location.hostname != "localhost") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-20616165-3', 'auto');
    ga('send', 'pageview');
  }
</script>





</body>
</html>

