<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="canonical" href="http://yut.hatenablog.com/entry/20110324/1300945133" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.55.4" />

  <title>ShellScriptのまとめ &middot; Y&#39;s note</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://yutakikuchi.github.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://yutakikuchi.github.io/blog/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://yutakikuchi.github.io/blog/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://yutakikuchi.github.io/img/favicon.ico" type="image/x-icon" />

  
    
        <link rel="stylesheet" href="https://yutakikuchi.github.io/blog/css/my.css">
    
  
  
    
        <script src="https://yutakikuchi.github.io/blog/js/my.js"></script>
    
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://yutakikuchi.github.io/">Y's note</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yutakikuchi.github.io/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yutakikuchi.github.io/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yutakikuchi.github.io/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/yutakikuchi_" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://facebook.com/yuta.kikuchi.007" target="_blank"><i class="fa fa-facebook-square fa-fw"></i>Facebook</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="http://slideshare.net/https://www.slideshare.net/yutakikuchi58/" target="_blank"><i class="fa fa-slideshare fa-fw"></i>SlideShare</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/https://www.linkedin.com/in/%E4%BD%91%E5%A4%AA-%E8%8F%8A%E6%B1%A0-36291a44/" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/yutakikuchi" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2019. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>ShellScriptのまとめ</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2011 Mar 24, 14:38</time>
  </div>

  

  

  

</div>

  

<h2 id="shell-shellscriptのまとめ">[Shell] : ShellScriptのまとめ</h2>

<div class="section">
<h4>概要</h4>

<blockquote>
    <p>ShellScriptについて簡単にまとめます。<br />
私は<a class="keyword" href="http://d.hatena.ne.jp/keyword/zsh">zsh</a>使いですが、この記事ではshを中心に書いています。</p>

</blockquote>

</div>
<div class="section">
<h4>Shellの種類と特徴</h4>

<blockquote>
    
<table>
<tr>
<th> Shell名 </th>
<th> 特徴 </th>
<td> </td>
</tr>
<tr>
<td>sh</td>
<td>最初のシェル（Bourneシェル）</td>
<td> </td>
</tr>
<tr>
<td><a class="keyword" href="http://d.hatena.ne.jp/keyword/csh">csh</a></td>
<td><a class="keyword" href="http://d.hatena.ne.jp/keyword/C%B8%C0%B8%EC">C言語</a>の文法に似た<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>用いることができる</td>
<td> </td>
</tr>
<tr>
<td><a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a></td>
<td>Bourneシェルを拡張したもの（Bourne Again Shell）</td>
<td> </td>
</tr>
<tr>
<td><a class="keyword" href="http://d.hatena.ne.jp/keyword/tcsh">tcsh</a></td>
<td><a class="keyword" href="http://d.hatena.ne.jp/keyword/csh">csh</a>を拡張したもの</td>
<td> </td>
</tr>
<tr>
<td><a class="keyword" href="http://d.hatena.ne.jp/keyword/ksh">ksh</a></td>
<td><a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%A6%CD%D1UNIX">商用UNIX</a>(SystemV)の標準シェル</td>
<td> </td>
</tr>
<tr>
<td><a class="keyword" href="http://d.hatena.ne.jp/keyword/zsh">zsh</a></td>
<td>最強のシェル(<a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a>や<a class="keyword" href="http://d.hatena.ne.jp/keyword/tcsh">tcsh</a>の機能を併せ持つ)</td>
<td> </td>
</tr>
</table>
</blockquote>

</div>
<div class="section">
<h4>基本コマンド</h4>

<blockquote>
    
<table>
<tr>
<th> コマンド </th>
<th> 説明 </th>
<td> </td>
</tr>
<tr>
<td>Ctrl+H</td>
<td>カーソルの左の文字を一文字削除（BSキー）</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+B</td>
<td>カーソルを左に移動</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+F</td>
<td>カーソルを右に移動</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+D</td>
<td>カーソル上の文字を一文字削除（<a class="keyword" href="http://d.hatena.ne.jp/keyword/Dell">Dell</a>キー）</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+K</td>
<td>カーソルから右側の文字をすべて削除</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+S</td>
<td>画面への出力を一時停止</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+Q</td>
<td>画面への出力を再開</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+L</td>
<td>画面をクリアー</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+A</td>
<td>行の先頭にカーソルを移動</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+E</td>
<td>行の最後にカーソルを移動</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+C</td>
<td>プログラムの処理を中止</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+Z</td>
<td>プログラムの処理を一時停止</td>
<td> </td>
</tr>
<tr>
<td>Ctrl+P</td>
<td> 履歴をひとつ前に遡る </td>
<td> </td>
</tr>
<tr>
<td>Ctrl+N</td>
<td>履歴を逆順の遡る</td>
<td> </td>
</tr>
<tr>
<td>!!</td>
<td>直前の実行したコマンドを実行</td>
<td> </td>
</tr>
<tr>
<td>!-n</td>
<td>n回前に実行したコマンドを実行</td>
<td> </td>
</tr>
<tr>
<td>!n</td>
<td>history番号のn番号を実行</td>
<td> </td>
</tr>
<tr>
<td>!<文字列></td>
<td>文字列から始まるコマンドの最新のものを実行</td>
<td> </td>
</tr>
<tr>
<td>!?<文字列>?</td>
<td>文字列を含むコマンドの最新のものを実行</td>
<td> </td>
</tr>
<tr>
<td>history</td>
<td>historyの一覧を表示</td>
<td> </td>
</tr>
</table>
</blockquote>

</div>
<div class="section">
<h4>四則<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a></h4>

<blockquote>
    
<table>
<tr>
<th> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a> </th>
<th> 説明 </th>
</tr>
<tr>
<td> + </td>
<td> 和 </td>
<td> </td>
</tr>
<tr>
<td> - </td>
<td>  差 </td>
</tr>
<tr>
<td> * </td>
<td> 積 </td>
<td> </td>
</tr>
<tr>
<td> / </td>
<td> 商 </td>
<td> </td>
</tr>
<tr>
<td>  % </td>
<td> 余り </td>
<td> </td>
</tr>
</table>
</blockquote>

</div>
<div class="section">
<h4>数値評価<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a></h4>

<blockquote>
    
<table>
<tr>
<th> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a> </th>
<th> 説明 </th>
</tr>
<tr>
<td> -lt </td>
<td> より小さい </td>
<td> </td>
</tr>
<tr>
<td> -le </td>
<td>  以下 </td>
</tr>
<tr>
<td> -eq </td>
<td> 等しい </td>
<td> </td>
</tr>
<tr>
<td> -ge </td>
<td> 以上 </td>
<td> </td>
</tr>
<tr>
<td> -gt </td>
<td> より大きい </td>
<td> </td>
</tr>
<tr>
<td> -ne </td>
<td>  等しくない </td>
<td> </td>
</tr>
</table>
</blockquote>

</div>
<div class="section">
<h4>文字列比較<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a></h4>

<blockquote>
    
<table>
<tr>
<th> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a> </th>
<th> 説明 </th>
</tr>
<tr>
<td> = </td>
<td> 両辺の文字列が一致したとき真 </td>
</tr>
<tr>
<td> != </td>
<td> 両辺の文字列が一致しないとき真 </td>
</tr>
<tr>
<td> -n 変数 </td>
<td> 変数の長さが0でないときに真 </td>
<td> </td>
</tr>
<tr>
<td> -z 変数 </td>
<td> 変数の長さが0でであるとき真 </td>
<td> </td>
</tr>
<tr>
<td> ! 変数 </td>
<td> 変数の長さが0でであるとき真 </td>
<td> </td>
</tr>
</table>
</blockquote>

</div>
<div class="section">
<h4>論理<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a></h4>

<blockquote>
    
<table>
<tr>
<th> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a> </th>
<th> 説明 </th>
</tr>
<tr>
<td> ! cond </td>
<td> condが偽のとき真 </td>
</tr>
<tr>
<td> cond -a cond2 </td>
<td> condかつcond2のとき真 </td>
</tr>
<tr>
<td> cond -o cond2 </td>
<td> condまたはcond2のとき真 </td>
<td> </td>
</tr>
</table>
</blockquote>

</div>
<div class="section">
<h4>ファイル属性<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a></h4>
<p>※fileという記述のところにファイルパスを指定</p>

<blockquote>
    
<table>
<tr>
<th> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a> </th>
<th> 説明 </th>
</tr>
<tr>
<td> -d file </td>
<td> fileが存在してディレクトリのとき真 </td>
<td> </td>
</tr>
<tr>
<td> -e file </td>
<td> fileが存在するとき真 </td>
<td> </td>
</tr>
<tr>
<td> -r file </td>
<td> fileが読み取り可能なとき真 </td>
</tr>
<tr>
<td> -w file </td>
<td> fileが書き込み可能なとき真 </td>
</tr>
<tr>
<td> -x file </td>
<td> fileが実行可能なとき真 </td>
</tr>
<tr>
<td> -f file </td>
<td> fileが存在し普通のファイルのとき真 </td>
</tr>
<tr>
<td> -L file </td>
<td> fileが<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%F3%A5%DC%A5%EA%A5%C3%A5%AF%A5%EA%A5%F3%A5%AF">シンボリックリンク</a>のとき真 </td>
</tr>
<tr>
<td> -s file </td>
<td> fileサイズが0より大きいとき真 </td>
</tr>
<tr>
<td> file -nt file2 </td>
<td> fileがfile2より新しければ真 </td>
</tr>
<tr>
<td> file -ot file2 </td>
<td> fileがfile2より古ければ真 </td>
</tr>
</table>
</blockquote>

</div>
<div class="section">
<h4>特殊変数</h4>

<blockquote>
    
<table>
<tr>
<th> 変数名</th>
<th> 説明 </th>
<td> </td>
</tr>
<tr>
<td>$?</td>
<td> 最後に実行したコマンドのexit値 0:成功時　1:失敗時</td>
<td> </td>
</tr>
<tr>
<td>$$</td>
<td> シェル自身のプロセスID</td>
<td> </td>
</tr>
<tr>
<td>$!</td>
<td> シェルが最後に起動したバックグラウンドプロセスのプロセスID</td>
<td> </td>
</tr>
<tr>
<td>$-</td>
<td> シェルの起動時のフラグ、setコマンドを使って設定したフラグの一覧</td>
<td> </td>
</tr>
<tr>
<td>$n</td>
<td> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>に渡された n番目の引数 (9個まで引数を取れる。$0は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>の名前、 $1は第1引数、...、$9は第9引数)</td>
<td> </td>
</tr>
<tr>
<td>$#</td>
<td> シェルに対する引数の個数(引数がない場合は0)</td>
<td> </td>
</tr>
<tr>
<td>$*</td>
<td> 全引数リスト。ダブルクォートで囲んだ場合、"$1 $2 ... $n" と全引数を一つにくっつけた物に展開される。</td>
<td> </td>
</tr>
<tr>
<td>$@</td>
<td> 全引数リスト。ダブルクォートで囲んだ場合、"$1" "$2" ... "$n" とそれぞれの引数を個別にダブルクォートで囲んで展開する。</td>
<td> </td>
</tr>
</table>
</blockquote>

</div>
<div class="section">
<h4>1行目のおまじない</h4>

<blockquote>
    <p>#!はシバンといいます。以下のプログラムはこれを使うよという意味です。<br />
<a href="http://ja.wikipedia.org/wiki/">http://ja.wikipedia.org/wiki/</a>シバン_(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unix">Unix</a>)<br />
#!<a class="keyword" href="http://d.hatena.ne.jp/keyword//bin/sh">/bin/sh</a> -x といった-xと指定する事でデバックモードで実行できるようです。</p>

</blockquote>

</div>
<div class="section">
<h4>変数の使い方</h4>

<blockquote>
    
<div class="section">
<h5>スペースを入れると文法エラーになる。</h5>
<pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh</span>
a <span class="synStatement">=</span> <span class="synStatement">"</span><span class="synConstant">JavaScript</span><span class="synStatement">"</span> <span class="synComment">#文法エラー</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$a</span>
</pre>
</div>
<div class="section">
<h5>シングルクォートとダブルクォートの違い</h5>

<ol>
<li>ダブルクォーテーションはその中にある変数は展開される。</li>
<li>シングルクォーテーションは文字列定数として扱われる。</li>
</ol><p>※<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>なども同様。</p>
<pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#/bin/sh</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">'</span><span class="synConstant">$100</span><span class="synStatement">'</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">"</span><span class="synPreProc">$1</span><span class="synConstant">00</span><span class="synStatement">"</span>
</pre>
</div>
<div class="section">
<h5>ブレース展開</h5>

<ol>
<li>文字列をカンマ区切りで{}でくくるとそれぞれを展開してくれる。</li>
<li>例はfor文の項目で利用するファイル配布処理。</li>
</ol><pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh </span>
<span class="synIdentifier">list</span>=<span class="synPreProc">(</span><span class="synSpecial"> </span><span class="synStatement">local</span><span class="synSpecial">{</span><span class="synConstant">01</span><span class="synSpecial">,</span><span class="synConstant">02</span><span class="synSpecial">,</span><span class="synConstant">03</span><span class="synSpecial">}.devs </span><span class="synPreProc">)</span>
<span class="synStatement">for </span>i <span class="synStatement">in</span> <span class="synPreProc">${list[</span>@<span class="synPreProc">]}</span>
<span class="synStatement">do</span>
scp .ssh <span class="synPreProc">$i</span>
<span class="synStatement">done</span>
</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4>配列</h4>

<blockquote>
    
<div class="section">
<h5>定義</h5>
<pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh</span>
<span class="synIdentifier">list</span>=<span class="synPreProc">(</span><span class="synSpecial"> </span><span class="synConstant">1</span><span class="synSpecial"> </span><span class="synConstant">2</span><span class="synSpecial"> </span><span class="synConstant">3</span><span class="synSpecial"> </span><span class="synPreProc">)</span>
<span class="synComment">#以下は上と同義</span>
list<span class="synStatement">[</span><span class="synConstant">0</span><span class="synStatement">]=</span><span class="synConstant">1</span>
list<span class="synStatement">[</span><span class="synConstant">1</span><span class="synStatement">]=</span><span class="synConstant">2</span>
list<span class="synStatement">[</span><span class="synConstant">3</span><span class="synStatement">]=</span><span class="synConstant">3</span>
<span class="synComment">#参照</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">${list[</span><span class="synConstant">0</span><span class="synPreProc">]}</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">${list[</span><span class="synConstant">1</span><span class="synPreProc">]}</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">${list[</span><span class="synConstant">2</span><span class="synPreProc">]}</span>
</pre>
</div>
<div class="section">
<h5>for文と利用</h5>

<ol>
<li>後で項目を挙げるfor文と配列の組み合わせ</li>
<li>${list[@]}は配列の全要素。</li>
<li>${#list[@]}となると配列の大きさになる。</li>
</ol><pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#/bin/sh</span>
<span class="synIdentifier">list</span>=<span class="synPreProc">(</span><span class="synConstant">1</span><span class="synSpecial"> </span><span class="synConstant">2</span><span class="synSpecial"> </span><span class="synConstant">3</span><span class="synPreProc">)</span>
<span class="synIdentifier">total</span>=<span class="synConstant">0</span>
<span class="synStatement">for </span>a <span class="synStatement">in</span> <span class="synPreProc">${list[</span>@<span class="synPreProc">]}</span> 
<span class="synStatement">do</span>
  <span class="synIdentifier">total</span>=<span class="synSpecial">`</span><span class="synStatement">expr</span><span class="synSpecial"> </span><span class="synPreProc">$total</span><span class="synSpecial"> + </span><span class="synPreProc">$a</span><span class="synSpecial">`</span>
<span class="synStatement">done</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$total</span>
</pre>
</div>
<div class="section">
<h5>最後に要素を追加</h5>
<pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#/bin/sh</span>
<span class="synIdentifier">list</span>=<span class="synPreProc">(</span><span class="synConstant">1</span><span class="synSpecial"> </span><span class="synConstant">2</span><span class="synSpecial"> </span><span class="synConstant">3</span><span class="synPreProc">)</span>
<span class="synIdentifier">list</span>=<span class="synPreProc">(${list[</span>@<span class="synPreProc">]}</span><span class="synSpecial"> </span><span class="synConstant">10</span><span class="synPreProc">)</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">${list[</span>@<span class="synPreProc">]}</span>
</pre>
</div>
<div class="section">
<h5>2つ以上の配列のマージ</h5>
<pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#/bin/sh</span>
<span class="synIdentifier">list</span>=<span class="synPreProc">(</span><span class="synConstant">1</span><span class="synSpecial"> </span><span class="synConstant">2</span><span class="synSpecial"> </span><span class="synConstant">3</span><span class="synPreProc">)</span>
<span class="synIdentifier">list2</span>=<span class="synPreProc">(</span><span class="synConstant">4</span><span class="synSpecial"> </span><span class="synConstant">5</span><span class="synSpecial"> </span><span class="synConstant">6</span><span class="synPreProc">)</span>
<span class="synIdentifier">list</span>=<span class="synPreProc">(${list[</span>@<span class="synPreProc">]}</span><span class="synSpecial"> </span><span class="synPreProc">${list2[</span>@<span class="synPreProc">]})</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">"</span><span class="synPreProc">${list[</span>@<span class="synPreProc">]}</span><span class="synStatement">"</span>
</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4>文字列</h4>

<blockquote>
    
<div class="section">
<h5>例.二つ以上の文字列を連結させる</h5>
<pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh </span>
<span class="synIdentifier">str</span>=<span class="synStatement">"</span><span class="synConstant">Java</span><span class="synStatement">"</span> 
<span class="synIdentifier">str2</span>=<span class="synStatement">"</span><span class="synConstant">Script</span><span class="synStatement">"</span> 
<span class="synIdentifier">dstr</span>=<span class="synPreProc">$str$str2</span> 
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$dstr</span><span class="synConstant"> </span>
</pre>
</div>
<div class="section">
<h5>例.特定文字列の長さを取得</h5>
<pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh </span>
<span class="synIdentifier">str</span>=<span class="synStatement">"</span><span class="synConstant">JavaScript</span><span class="synStatement">"</span> 
<span class="synIdentifier">len</span>=<span class="synPreProc">${#str}</span> 
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$len</span><span class="synConstant"> </span>
</pre>
</div>
<div class="section">
<h5>例.<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%B5%B5%AC%C9%BD%B8%BD">正規表現</a>のマッチ</h5>
<pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh</span>
<span class="synIdentifier">a</span>=<span class="synStatement">"</span><span class="synConstant">JavaScript</span><span class="synStatement">"</span>
<span class="synStatement">if [</span> <span class="synSpecial">`</span><span class="synStatement">expr</span><span class="synSpecial"> </span><span class="synPreProc">$a</span><span class="synSpecial"> : </span><span class="synStatement">"</span><span class="synConstant">Java</span><span class="synStatement">"</span><span class="synSpecial">`</span> <span class="synStatement">]</span>
<span class="synStatement">then</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">"</span><span class="synConstant">match</span><span class="synStatement">"</span>
<span class="synStatement">else</span> 
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">"</span><span class="synConstant">no match</span><span class="synStatement">"</span>
<span class="synStatement">fi</span>
</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4>if文</h4>

<blockquote>
    
<div class="section">
<h5>例.文字列の空判定</h5>

<ol>
<li>ifと[]の間には半角スペースが必要。</li>
<li>if<span data-unlink>とelif</span>の後には必ずthenを記述する。 </li>
<li>ifの終了となるfiを記述する。</li>
<li>慣習的に空文字判定は"x$a" = "x"のように記述する。</li>
</ol><pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh</span>
<span class="synIdentifier">a</span>=<span class="synStatement">"</span><span class="synConstant">test</span><span class="synStatement">"</span> 
<span class="synStatement">if [</span> <span class="synStatement">"</span><span class="synConstant">x</span><span class="synPreProc">$a</span><span class="synStatement">"</span> <span class="synStatement">=</span> <span class="synConstant">"x"</span> <span class="synStatement">]</span>
<span class="synStatement">then</span> 
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">"</span><span class="synConstant">Empty</span><span class="synStatement">"</span><span class="synConstant"> </span>
<span class="synStatement">elif</span> <span class="synStatement">[</span> <span class="synPreProc">$a</span> <span class="synStatement">=</span> <span class="synConstant">"test"</span> <span class="synStatement">]</span>
<span class="synStatement">then</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">"</span><span class="synConstant">Match</span><span class="synStatement">"</span>
<span class="synStatement">else</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">"</span><span class="synConstant">Not Match</span><span class="synStatement">"</span><span class="synConstant"> </span>
<span class="synStatement">fi</span>
</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4>for文</h4>

<blockquote>
    
<div class="section">
<h5>例.ファイルを配布</h5>

<ol>
<li>連続する数を生成する。</li>
<li>規則正しいサーバ名に対してファイルを配布する。</li>
<li>echoで表示し ｜sh で実行する。</li>
</ol><pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh </span>
<span class="synStatement">for </span>n <span class="synStatement">in</span> <span class="synSpecial">{</span>1..10<span class="synSpecial">}</span>
<span class="synStatement">do</span> 
  <span class="synStatement">echo</span><span class="synConstant"> scp .ssh local</span><span class="synPreProc">$n</span><span class="synConstant">: </span><span class="synStatement">|</span> sh
<span class="synStatement">done</span>
</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4>while文</h4>

<blockquote>
    
<div class="section">
<h5>例.ファイルを配布</h5>

<ol>
<li>for分の例をwhile文で書いてみる。</li>
<li>数値<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a>の-leを使う。</li>
</ol><pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh </span>
<span class="synIdentifier">a</span>=<span class="synConstant">0</span>
<span class="synStatement">while [</span> <span class="synPreProc">$a</span> <span class="synStatement">-le</span> <span class="synConstant">10</span> <span class="synStatement">] </span>
<span class="synStatement">do</span> 
<span class="synStatement">echo</span><span class="synConstant"> scp .ssh local</span><span class="synPreProc">$a</span><span class="synConstant">.devs:</span>
<span class="synIdentifier">a</span>=<span class="synSpecial">`</span><span class="synStatement">expr</span><span class="synSpecial"> </span><span class="synPreProc">$a</span><span class="synSpecial"> + </span><span class="synConstant">1</span><span class="synSpecial">`</span> 
<span class="synStatement">done</span>
</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4>until文</h4>

<blockquote>
    
<div class="section">
<h5>例.ファイルを配布</h5>

<ol>
<li>for文の例をuntilを使って書く。</li>
</ol><pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh </span>
<span class="synIdentifier">a</span>=<span class="synConstant">0</span>
<span class="synStatement">until [</span> <span class="synPreProc">$a</span> <span class="synStatement">==</span> <span class="synConstant">11</span> <span class="synStatement">] </span>
<span class="synStatement">do</span>
   <span class="synStatement">echo</span><span class="synConstant"> scp .ssh local</span><span class="synPreProc">$a</span><span class="synConstant">.dev</span>
   <span class="synIdentifier">a</span>=<span class="synSpecial">`</span><span class="synStatement">expr</span><span class="synSpecial"> </span><span class="synPreProc">$a</span><span class="synSpecial"> + </span><span class="synConstant">1</span><span class="synSpecial">`</span>
<span class="synStatement">done</span>
</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4>case文</h4>

<blockquote>
    
<div class="section">
<h5>例.引数の値から呼び出すコマンドを変える。</h5>

<ol>
<li>case文を利用。</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%E9%A5%A4%A5%F3">コマンドライン</a>引数を取得</li>
</ol><pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh </span>
<span class="synStatement">case</span> <span class="synPreProc">$1</span> <span class="synStatement">in</span>
*.txt<span class="synStatement">)</span> vi <span class="synPreProc">$1</span> <span class="synStatement">;;</span>
*.jpg<span class="synStatement">|</span>*.jpeg<span class="synStatement">)</span> gimp <span class="synPreProc">$1</span> <span class="synStatement">;;</span>
*.mp3<span class="synStatement">)</span> xmms <span class="synPreProc">$1</span> <span class="synStatement">;;</span>
*<span class="synStatement">)</span> <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">"</span><span class="synConstant">I don't know this file.</span><span class="synStatement">"</span><span class="synConstant"> </span><span class="synStatement">;;</span>
<span class="synStatement">esac</span>
</pre>
</div>
<div class="section">
<h5>例.引数に指定されたファイルの文法チェック</h5>
<pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh </span>
<span class="synStatement">case</span> <span class="synPreProc">$1</span> <span class="synStatement">in</span>
*.php<span class="synStatement">)</span> php -l <span class="synPreProc">$1</span> <span class="synStatement">;;</span>
*.pl<span class="synStatement">|</span>*.cgi<span class="synStatement">)</span> perl -c <span class="synPreProc">$1</span> <span class="synStatement">;;</span>
*.sh<span class="synStatement">)</span> sh -n <span class="synPreProc">$1</span> <span class="synStatement">;;</span>
*<span class="synStatement">)</span> <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">"</span><span class="synConstant">I don't know this file.</span><span class="synStatement">"</span><span class="synConstant"> </span><span class="synStatement">;;</span>
<span class="synStatement">esac</span>
</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4>関数を使う</h4>

<blockquote>
    
<div class="section">
<h5>例.引数の合計値を出す</h5>

<ol>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%E9%A5%A4%A5%F3">コマンドライン</a>引数を取得する$*を利用する。</li>
<li>shiftコマンドを利用して$1の変数が次の引数を参照できるようにする。</li>
</ol><pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh </span>
<span class="synIdentifier">sum()</span>
<span class="synIdentifier">{</span>
<span class="synIdentifier">total</span>=<span class="synConstant">0</span>
<span class="synStatement">while [</span> <span class="synPreProc">$#</span> <span class="synStatement">-ne</span> <span class="synConstant">0</span> <span class="synStatement">] </span>
<span class="synStatement">do</span>
<span class="synIdentifier">total</span>=<span class="synSpecial">`</span><span class="synStatement">expr</span><span class="synSpecial"> </span><span class="synPreProc">$total</span><span class="synSpecial"> + </span><span class="synPreProc">$1</span><span class="synSpecial">`</span>
<span class="synStatement">shift</span>
<span class="synStatement">done</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$total</span>
<span class="synStatement">return</span> <span class="synConstant">0</span> 
<span class="synIdentifier">}</span>

sum <span class="synPreProc">$*</span>
</pre>
</div>
</blockquote>

</div>
<div class="section">
<h4>応用</h4>

<blockquote>
    
<div class="section">
<h5>例.はてぶの新着エントリーに掲載されているかどうかを確認</h5>

<ol>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/curl">curl</a>と<a class="keyword" href="http://d.hatena.ne.jp/keyword/grep">grep</a>の利用</li>
</ol><pre class="hljs sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh </span>
<span class="synIdentifier">a</span>=<span class="synConstant">0</span>
<span class="synIdentifier">acount</span>=<span class="synStatement">"</span><span class="synConstant">yutakikuchi</span><span class="synStatement">"</span>
<span class="synIdentifier">baseuri</span>=<span class="synStatement">"</span><span class="synConstant">http://b.hatena.ne.jp/entrylist/it?</span><span class="synStatement">"</span>
<span class="synComment">#loop</span>
<span class="synStatement">while [</span> <span class="synPreProc">$a</span> <span class="synStatement">-le</span> <span class="synConstant">3000</span> <span class="synStatement">] </span>
<span class="synStatement">do</span> 
<span class="synIdentifier">result</span>=<span class="synSpecial">`curl </span><span class="synPreProc">$baseuri</span><span class="synStatement">'</span><span class="synConstant">sort=eid&of=</span><span class="synStatement">'</span><span class="synPreProc">$a</span><span class="synSpecial">`</span> 
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$result</span><span class="synConstant"> </span><span class="synStatement">|</span> <span class="synStatement">grep</span> <span class="synStatement">-i</span> <span class="synPreProc">$acount</span>
<span class="synStatement">if [</span> <span class="synPreProc">$?</span> <span class="synStatement">=</span> <span class="synConstant">0</span> <span class="synStatement">]</span>
<span class="synStatement">then</span>
    <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$a</span><span class="synStatement">"</span><span class="synConstant"> hold=0</span><span class="synStatement">"</span><span class="synConstant"> </span><span class="synStatement">>></span> result.txt
<span class="synStatement">fi</span>
<span class="synIdentifier">result</span>=<span class="synSpecial">`curl </span><span class="synPreProc">$baseuri</span><span class="synStatement">'</span><span class="synConstant">sort=hot&threshold=3&of=</span><span class="synStatement">'</span><span class="synPreProc">$a</span><span class="synSpecial">`</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$result</span><span class="synConstant"> </span><span class="synStatement">|</span> <span class="synStatement">grep</span> <span class="synStatement">-i</span> <span class="synPreProc">$acount</span>
<span class="synStatement">if [</span> <span class="synPreProc">$?</span> <span class="synStatement">=</span> <span class="synConstant">0</span> <span class="synStatement">]</span>
<span class="synStatement">then</span>
    <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$a</span><span class="synStatement">"</span><span class="synConstant"> hold=3</span><span class="synStatement">"</span><span class="synConstant"> </span><span class="synStatement">>></span> result.txt
<span class="synStatement">fi</span>
<span class="synIdentifier">result</span>=<span class="synSpecial">`curl </span><span class="synPreProc">$baseuri</span><span class="synStatement">'</span><span class="synConstant">sort=hot&threshold=5&of=</span><span class="synStatement">'</span><span class="synPreProc">$a</span><span class="synSpecial">`</span>
<span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$result</span><span class="synConstant"> </span><span class="synStatement">|</span> <span class="synStatement">grep</span> <span class="synStatement">-i</span> <span class="synPreProc">$acount</span>
<span class="synStatement">if [</span> <span class="synPreProc">$?</span> <span class="synStatement">=</span> <span class="synConstant">0</span> <span class="synStatement">]</span>
<span class="synStatement">then</span>
    <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synPreProc">$a</span><span class="synStatement">"</span><span class="synConstant"> hold=5</span><span class="synStatement">"</span><span class="synConstant"> </span><span class="synStatement">>></span> result.txt
<span class="synStatement">fi</span>
<span class="synIdentifier">a</span>=<span class="synSpecial">`</span><span class="synStatement">expr</span><span class="synSpecial"> </span><span class="synPreProc">$a</span><span class="synSpecial"> + </span><span class="synConstant">20</span><span class="synSpecial">`</span>
<span class="synStatement">done</span>
</pre>
</div>
</blockquote>

</div>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://yutakikuchi.github.io/post/201103051845/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://yutakikuchi.github.io/post/201103051845/">Javascriptによる正規表現まとめ</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://yutakikuchi.github.io/post/201103311334/">Mobile-UserAgent検索システム</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://yutakikuchi.github.io/post/201103311334/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="https://yutakikuchi.github.io/js/ui.js"></script>
<script src="https://yutakikuchi.github.io/js/menus.js"></script>


<script>
  
  if (window.location.hostname != "localhost") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-20616165-3', 'auto');
    ga('send', 'pageview');
  }
</script>





</body>
</html>

