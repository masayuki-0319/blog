<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="canonical" href="http://yut.hatenablog.com/entry/20130617/1371425713" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.55.4" />

  <title>誰もが一度は陥る日付処理。各種プログラミング言語におけるDateTime型/TimeStamp型の変換方法のまとめ &middot; Y&#39;s note</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://yutakikuchi.github.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://yutakikuchi.github.io/blog/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://yutakikuchi.github.io/blog/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://yutakikuchi.github.io/img/favicon.ico" type="image/x-icon" />

  
    
        <link rel="stylesheet" href="https://yutakikuchi.github.io/blog/css/my.css">
    
  
  
    
        <script src="https://yutakikuchi.github.io/blog/js/my.js"></script>
    
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://yutakikuchi.github.io/">Y's note</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yutakikuchi.github.io/blog/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yutakikuchi.github.io/blog/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yutakikuchi.github.io/blog/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/yutakikuchi_" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://facebook.com/yuta.kikuchi.007" target="_blank"><i class="fa fa-facebook-square fa-fw"></i>Facebook</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="http://slideshare.net/https://www.slideshare.net/yutakikuchi58/" target="_blank"><i class="fa fa-slideshare fa-fw"></i>SlideShare</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/https://www.linkedin.com/in/%E4%BD%91%E5%A4%AA-%E8%8F%8A%E6%B1%A0-36291a44/" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/yutakikuchi" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2019. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>誰もが一度は陥る日付処理。各種プログラミング言語におけるDateTime型/TimeStamp型の変換方法のまとめ</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2013 Jun 17, 08:35</time>
  </div>

  

  

  

</div>

  

<h2 id="programming-誰もが一度は陥る日付処理-各種プログラミング言語におけるdatetime型-timestamp型の変換方法のまとめ">[programming] : 誰もが一度は陥る日付処理。各種プログラミング言語におけるDateTime型/TimeStamp型の変換方法のまとめ</h2>

<div class="section">
<h4>日付型の変換処理</h4>

<blockquote>
    <p><a href="http://d.hatena.ne.jp/yutakikuchi/20111015/1318633937">Date/Timestamp変換のまとめ - Yuta.Kikuchiの日記</a> <a href="http://b.hatena.ne.jp/entry/d.hatena.ne.jp/yutakikuchi/20111015/1318633937"><img src="http://b.hatena.ne.jp/entry/image/http://d.hatena.ne.jp/yutakikuchi/20111015/1318633937" alt="はてなブックマーク - Date/Timestamp変換のまとめ - Yuta.Kikuchiの日記" border="0" /></a><br />
10言語の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%B8%C0%B8%EC">プログラミング言語</a>に対してそこそこの知識を保有している<a href='https://twitter.com/yutakikuc'>@yutakikuc</a>です。いろんな<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%B8%C0%B8%EC">プログラミング言語</a>を使用していると文法を覚えるのは大変ですよね。<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>書いている途中から<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>の文法を誤って書き始めたり... それぞれの言語の文法の違いを事細かく覚える事は無理に近いです。今日はそんな各種言語仕様の記述で難解なDateTime/TimeStampについて紹介したいと思います。扱うのはWeb系のメジャー<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%B8%C0%B8%EC">プログラミング言語</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/C%2B%2B">C++</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/Perl">Perl</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>になります。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mysql">Mysql</a>からデータを取り出した後や、WebAPIから取得したデータを表示用の日付フォーマットに変換する事があると思うのでそこで利用できる知識になるかと思います。そもそもDateTime型/TimeStamp型って何だよっていう人もいるかと思うので簡単にまとめると以下のようになります。※ここでのTimeStampはUnixTimeを表現しています。</p>

<table>
<tr>
<th> 型 </th>
<th> 意味 </th>
<th> 例 </th>
</tr>
<tr>
<td> DateTime </td>
<td> YYYY-MM-DD HH:mm:SSで表現する時刻Format </td>
<td> 2013-05-31 20:33:20 </td>
</tr>
<tr>
<td> TimeStamp </td>
<td> 1970/1/1からの秒数で上限は2037年まで </td>
<td> 1370000000 </td>
<td> </td>
</tr>
</table>
</blockquote>

</div>
<div class="section">
<h4>変換重要処理早見表</h4>

<blockquote>
    
<table>
<tr>
<th> 言語 </th>
<th> DateTime取得 </th>
<th> TimeStamp取得 </th>
<th> DateTime変換 => TimeStamp  </th>
<th> TimeStamp => DateTime変換</th>
</tr>
<tr>
<td> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Mysql">Mysql</a> </td>
<td> NOW() </td>
<td> <a class="keyword" href="http://d.hatena.ne.jp/keyword/UNIX">UNIX</a>_TIMESTAMP()  </td>
<td>  <a class="keyword" href="http://d.hatena.ne.jp/keyword/UNIX">UNIX</a>_TIMESTAMP() </td>
<td> FROM_UNIXTIME() </td>
<td> </td>
</tr>
<tr>
<td> <a class="keyword" href="http://d.hatena.ne.jp/keyword/C%2B%2B">C++</a> </td>
<td> time_t型, struct tm構造体, strftime(datetime, N, "%Y-%m-%d %H:%M:%S",tm ) </td>
<td> time_t型, time(NULL) </td>
<td> time_t型,struct tm構造体,strptime(datetime, "%Y-%m-%d %H:%M:%S", &tm ), mktime(&tm) </td>
<td> time_t型,struct tm構造体, localtime(), strftime(datetime, N, "%Y-%m-%d %H:%M:%S",tm ); </td>
<td> </td>
</tr>
<tr>
<td> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a> </td>
<td> new Date(), new SimpleDateFormat("yyyy'-'MM'-'dd' 'HH':'mm':'ss"), sdf.format() </td>
<td> new Date(), date.getTime() </td>
<td> new Date(), new SimpleDateFormat("yyyy'-'MM'-'dd' 'HH':'mm':'ss"),sdf.parse(),date.getTime() </td>
<td> new Date(), new SimpleDateFormat("yyyy'-'MM'-'dd' 'HH':'mm':'ss"), sdf.format() </td>
<td> </td>
</tr>
<tr>
<td> <a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a> </td>
<td> new Date(), getFullYear()等の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a> </td>
<td> parseInt( new Date() / 1000 )  </td>
<td> Date.parse( datetime.replace( /-/g, '/') ) / 1000  </td>
<td> new Date(timestamp*1000), getFullYear()等の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a> </td>
<td> </td>
</tr>
<tr>
<td> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Perl">Perl</a> </td>
<td> strftime( "%Y-%m-%d %H:%M:%S" , localtime()) </td>
<td> time </td>
<td> Time::Local,DateTime::Format::Strptime,Time::Pieceモジュールを使う</td>
<td> strftime( "%Y-%m-%d %H:%M:%S" , localtime($utime)) </td>
<td> </td>
</tr>
<tr>
<td> <a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a> </td>
<td> date("Y-m-d H:i:s") / strftime("%Y-%m-%d %H:%M:%S") </td>
<td> time() </td>
<td> strtotime( $datetime ) </td>
<td> date( "Y-m-d H:i:s", $utime ) / strftime("%Y-%m-%d %H:%M:%S", $utime )</td>
<td> </td>
</tr>
<tr>
<td> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> </td>
<td> datetime.now().strftime( '%Y-%m-%d %H:%M:%S' ) </td>
<td> int(time()) </td>
<td> int( time.mktime( datetime.strptime( dtime, "%Y-%m-%d %H:%M:%S" ).timetuple() ) ) </td>
<td> datetime.fromtimestamp( utime ) </td>
<td> </td>
</tr>
<tr>
<td> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a> </td>
<td> Time.now.strftime "%Y-%m-%d %H:%M:%S" </td>
<td> Time.now.to_i </td>
<td> Time.parse(datetime).to_i </td>
<td> Time.at(utime).strftime "%Y-%m-%d %H:%M:%S" </td>
<td> </td>
</tr>
</table><p>簡単にDateTime/TimeStamp処理ができるのは<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mysql">Mysql</a>,<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>,<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>になると思います。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mysql">Mysql</a>,<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>,<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>は一つの関数や<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>の利用で処理できるのでコードの記述量が少なくて済みます。それとは反対に特に<a class="keyword" href="http://d.hatena.ne.jp/keyword/C%2B%2B">C++</a>は構造体の変換がややこしい、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Perl">Perl</a>はデフォルトでstrptimeが使えなく必要なModuleの設定が大変であること、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>は記述が複雑で直感的では無いのでとても覚えられずメモの必要があります。</p>

</blockquote>

</div>
<div class="section">
<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/Mysql">Mysql</a>のお話</h4>

<blockquote>
    
<div class="section">
<h5>現在時刻のDateTime取得</h5>
<p>NOW()を使います。</p>
<pre class="hljs sql" data-lang="sql" data-unlink>mysql> <span class="synStatement">SELECT</span> NOW() <span class="synSpecial">AS</span> DATETIME;
+<span class="synComment">---------------------+</span>
| DATETIME            |
+<span class="synComment">---------------------+</span>
| <span class="synConstant">2013-06-15</span> <span class="synConstant">19</span>:<span class="synConstant">36</span>:<span class="synConstant">53</span> |
+<span class="synComment">---------------------+</span>
<span class="synConstant">1</span> <span class="synSpecial">row</span> <span class="synStatement">in</span> <span class="synStatement">set</span> (<span class="synConstant">0</span>.<span class="synConstant">00</span> sec)
</pre>
</div>
<div class="section">
<h5>現在時刻のTimeStamp取得</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/UNIX">UNIX</a>_TIMESTAMP()を使います。</p>
<pre class="hljs sql" data-lang="sql" data-unlink>mysql> <span class="synStatement">SELECT</span> UNIX_TIMESTAMP() <span class="synSpecial">AS</span> TIMESTAMP;
+<span class="synComment">------------+</span>
| TIMESTAMP  |
+<span class="synComment">------------+</span>
| <span class="synConstant">1371292653</span> |
+<span class="synComment">------------+</span>
<span class="synConstant">1</span> <span class="synSpecial">row</span> <span class="synStatement">in</span> <span class="synStatement">set</span> (<span class="synConstant">0</span>.<span class="synConstant">00</span> sec)
</pre>
</div>
<div class="section">
<h5>DateTime => TimeStamp変換</h5>
<p> <a class="keyword" href="http://d.hatena.ne.jp/keyword/UNIX">UNIX</a>_TIMESTAMP()にDATETIMEを指定します。</p>
<pre class="hljs sql" data-lang="sql" data-unlink>mysql> <span class="synStatement">SELECT</span> UNIX_TIMESTAMP(<span class="synConstant">'2013-06-15 19:37:33'</span>) <span class="synSpecial">AS</span> TIMESTAMP;
+<span class="synComment">------------+</span>
| TIMESTAMP  |
+<span class="synComment">------------+</span>
| <span class="synConstant">1371292653</span> |
+<span class="synComment">------------+</span>
<span class="synConstant">1</span> <span class="synSpecial">row</span> <span class="synStatement">in</span> <span class="synStatement">set</span> (<span class="synConstant">0</span>.<span class="synConstant">00</span> sec)
</pre>
</div>
<div class="section">
<h5>TimeStamp => DateTime変換</h5>
<p>FROM_UNIXTIME()にTIMESTAMPを指定します。</p>
<pre class="hljs sql" data-lang="sql" data-unlink>mysql> <span class="synStatement">SELECT</span> FROM_UNIXTIME(<span class="synConstant">1371292653</span>) <span class="synSpecial">AS</span> DATETIME;
+<span class="synComment">---------------------+</span>
| DATETIME            |
+<span class="synComment">---------------------+</span>
| <span class="synConstant">2013-06-15</span> <span class="synConstant">19</span>:<span class="synConstant">37</span>:<span class="synConstant">33</span> |
+<span class="synComment">---------------------+</span>
<span class="synConstant">1</span> <span class="synSpecial">row</span> <span class="synStatement">in</span> <span class="synStatement">set</span> (<span class="synConstant">0</span>.<span class="synConstant">01</span> sec)
</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Mysql">Mysql</a>のまとめ</h5>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Mysql">Mysql</a>のDateTime/TimeStamp処理は標準の関数で完結するので楽。</li>
<li>現在時刻をDateTimeで取得するにはNOW()を使用する。</li>
<li>現在時刻をTimeStampで取得するには<a class="keyword" href="http://d.hatena.ne.jp/keyword/UNIX">UNIX</a>_TIMESTAMP()を使用する。</li>
<li>TimeStampをDateTimeに変換するにはFROM_UNIXTIME()にTimeStampを指定する。</li>
<li>DateTimeをTimeStampに変換するには<a class="keyword" href="http://d.hatena.ne.jp/keyword/UNIX">UNIX</a>_TIMESTAMP()にDateTimeを指定する。</li>
</ul>
</div>
</blockquote>

</div>
<div class="section">
<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/C%2B%2B">C++</a>のお話</h4>

<blockquote>
    
<div class="section">
<h5>現在時刻のDateTime取得</h5>
<p>time_t型とstruct tm*を使用します。localtime関数がtm構造体を返してくれます。</p>
<pre class="hljs cpp" data-lang="cpp" data-unlink><span class="synPreProc">#include </span><span class="synConstant"><iostream></span>
<span class="synPreProc">#include </span><span class="synConstant"><time.h></span>
<span class="synPreProc">#define N </span><span class="synConstant">20</span>
<span class="synStatement">using</span> <span class="synType">namespace</span> std;
<span class="synType">int</span> main() {
   <span class="synType">time_t</span> timer;
   <span class="synType">struct</span> tm* tm;
   <span class="synType">char</span> datetime[N];
   timer = time(<span class="synConstant">NULL</span>);
   tm = localtime(&timer);
   strftime(datetime, N, <span class="synConstant">"%Y-%m-</span><span class="synSpecial">%d</span><span class="synConstant"> %H:%M:</span><span class="synSpecial">%S</span><span class="synConstant">"</span>,tm );
   cout << <span class="synConstant">"DATETIME = "</span> << datetime << endl;
   <span class="synStatement">return</span> <span class="synConstant">0</span>;
}
<span class="synComment">// 結果</span>
<span class="synComment">// DATETIME = 2013-06-15 10:45:33</span>
</pre>
</div>
<div class="section">
<h5>現在時刻のTimeStamp取得</h5>
<p>time_t型とtime関数を使用します。</p>
<pre class="hljs cpp" data-lang="cpp" data-unlink><span class="synPreProc">#include </span><span class="synConstant"><iostream></span>
<span class="synPreProc">#include </span><span class="synConstant"><time.h></span>
<span class="synStatement">using</span> <span class="synType">namespace</span> std;
<span class="synType">int</span> main() {
   <span class="synType">time_t</span> epoch_time;
   epoch_time = time(<span class="synConstant">NULL</span>);
   cout << <span class="synConstant">"TIMESTAMP = "</span> << epoch_time << endl;
   <span class="synStatement">return</span> <span class="synConstant">0</span>;
}
<span class="synComment">// 結果</span>
<span class="synComment">// TIMESTAMP = 1371256675</span>
</pre>
</div>
<div class="section">
<h5>DateTime => TimeStamp変換</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/const">const</a> char型の文字列として定義されているDateTimeをTimeStamp型に変換します。一度<a class="keyword" href="http://d.hatena.ne.jp/keyword/const">const</a> charからtm構造体に変換し、mktime関数でtm構造体をTimeStamp型に変換します。</p>
<pre class="hljs cpp" data-lang="cpp" data-unlink><span class="synPreProc">#include </span><span class="synConstant"><iostream></span>
<span class="synPreProc">#include </span><span class="synConstant"><time.h></span>
<span class="synPreProc">#define N </span><span class="synConstant">20</span>
<span class="synStatement">using</span> <span class="synType">namespace</span> std;
<span class="synType">int</span> main() {
   <span class="synType">time_t</span> timer;
   <span class="synType">struct</span> tm tm;
   <span class="synType">const</span> <span class="synType">char</span>* datetime = <span class="synConstant">"2013-06-15 12:00:00"</span>;
   <span class="synStatement">if</span>( strptime(datetime, <span class="synConstant">"%Y-%m-</span><span class="synSpecial">%d</span><span class="synConstant"> %H:%M:</span><span class="synSpecial">%S</span><span class="synConstant">"</span>, &tm ) != <span class="synConstant">NULL</span> ) {
  cout << <span class="synConstant">"TIMESTAMP = "</span> << mktime(&tm) << endl;
   }
   <span class="synStatement">return</span> <span class="synConstant">0</span>;
}
<span class="synComment">// 結果</span>
<span class="synComment">// DATETIME = 1371265200</span>
</pre>
</div>
<div class="section">
<h5>TimeStamp => DateTime変換</h5>
<p>最初に掲載したDateTimeの取得と似ていて、int型をtime_tに変換した値をlocaltime関数に入れてtmの構造体を作成しています。</p>
<pre class="hljs cpp" data-lang="cpp" data-unlink><span class="synPreProc">#include </span><span class="synConstant"><iostream></span>
<span class="synPreProc">#include </span><span class="synConstant"><time.h></span>
<span class="synPreProc">#define N </span><span class="synConstant">20</span>
<span class="synStatement">using</span> <span class="synType">namespace</span> std;
<span class="synType">int</span> main() {
   <span class="synType">unsigned</span> <span class="synType">int</span> timestamp = <span class="synConstant">1371265200</span>;
   <span class="synType">time_t</span> timer;
   <span class="synType">struct</span> tm* tm;
   <span class="synType">char</span> datetime[N];
   timer = (<span class="synType">time_t</span>)timestamp;
   tm = localtime(&timer);
   strftime(datetime, N, <span class="synConstant">"%Y-%m-</span><span class="synSpecial">%d</span><span class="synConstant"> %H:%M:</span><span class="synSpecial">%S</span><span class="synConstant">"</span>,tm );
   cout << <span class="synConstant">"DATETIME = "</span> << datetime << endl;  
   <span class="synStatement">return</span> <span class="synConstant">0</span>;
}
<span class="synComment">// 結果</span>
<span class="synComment">// DATETIME = 2013-06-15 12:00:00</span>
</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/C%2B%2B">C++</a>での変換まとめ</h5>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/C%2B%2B">C++</a>のDateTime/TimeStamp処理はtime_t型とstruct tmの変換を利用するのでやや表現が複雑になる。</li>
<li>time_t型はTimeStamp/UnixTimeを表現する構造体。</li>
<li>struct tmは年月日,時間をそれぞれのメンバ変数に格納する構造体。</li>
<li>localtime関数はtime_t型をtm構造体に変換する。</li>
<li>strftimeはtm構造体を任意の文字列に変換する。</li>
<li>strptimeは任意の文字列をtm構造体に変換する。</li>
</ul>
</div>
</blockquote>

</div>
<div class="section">
<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>のお話</h4>

<blockquote>
    <p><span class="deco" style="color:#FF0000;">※2013/07/20修正 : ななしさんから指摘頂いた時間のFormatをhh→HHに修正。 </span><br />
</p>

<div class="section">
<h5>現在時刻のDateTime取得</h5>
<p>Date型をSimpleDateFormatClassを使って特定のFormat文字列に変換します。</p>
<pre class="hljs java" data-lang="java" data-unlink><span class="synPreProc">import</span> java.util.*;
<span class="synPreProc">import</span> java.text.*;
<span class="synType">class</span> DateTime {
   <span class="synType">public</span> <span class="synType">static</span> <span class="synType">void</span> main(String[] args) {
  Date date = <span class="synStatement">new</span> Date();
  SimpleDateFormat sdf = <span class="synStatement">new</span> SimpleDateFormat(<span class="synConstant">"yyyy'-'MM'-'dd' 'HH':'mm':'ss"</span>);
  System.out.println(<span class="synConstant">"DATETIME = "</span> + sdf.format(date));
   }
}
<span class="synComment">// 結果</span>
<span class="synComment">// DATETIME = 2013-06-15 01:43:58</span>
</pre>
</div>
<div class="section">
<h5>現在時刻のTimeStamp取得</h5>
<p>Date型からmillisecをgetTime<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>で取得し1000で割ります。</p>
<pre class="hljs java" data-lang="java" data-unlink><span class="synPreProc">import</span> java.util.*;
<span class="synType">class</span> TimeStamp {
   <span class="synType">public</span> <span class="synType">static</span> <span class="synType">void</span> main(String[] args) {
  Date date = <span class="synStatement">new</span> Date();
  System.out.println(<span class="synConstant">"TIMESTAMP = "</span> + date.getTime()/<span class="synConstant">1000</span>);
   }
}
<span class="synComment">// 結果</span>
<span class="synComment">// TIMESTAMP = 1371271256</span>
</pre>
</div>
<div class="section">
<h5>DateTime => TimeStamp変換</h5>
<p>String文字列のDateTimeをSimpleDateFormatを利用してDate型に変換してTimeStampを出力します。</p>
<pre class="hljs java" data-lang="java" data-unlink><span class="synPreProc">import</span> java.util.*;
<span class="synPreProc">import</span> java.text.*;
<span class="synType">class</span> TimeStamp {
   <span class="synType">public</span> <span class="synType">static</span> <span class="synType">void</span> main(String[] args) {
  <span class="synStatement">try</span> {
     String datetime = <span class="synConstant">"2013-06-15 01:43:58"</span>;
     SimpleDateFormat sdf = <span class="synStatement">new</span> SimpleDateFormat(<span class="synConstant">"yyyy'-'MM'-'dd' 'HH':'mm':'ss"</span>);
     Date date = sdf.parse( datetime );
     System.out.println(<span class="synConstant">"TIMESTAMP = "</span> + date.getTime()/<span class="synConstant">1000</span>);
  } <span class="synStatement">catch</span>(ParseException e) {
     e.printStackTrace();
  }
   }
}
<span class="synComment">// 結果</span>
<span class="synComment">// TIMESTAMP = 1371228238</span>
</pre>
</div>
<div class="section">
<h5>TimeStamp => DateTime変換</h5>
<p>DateObjectを生成する際にlong型のtimestampを引数に入れてSimpleDateFormatでDateTime型に変換します。</p>
<pre class="hljs java" data-lang="java" data-unlink><span class="synPreProc">import</span> java.util.*;
<span class="synPreProc">import</span> java.text.*;
<span class="synType">class</span> DateTime {
   <span class="synType">public</span> <span class="synType">static</span> <span class="synType">void</span> main(String[] args) {
  <span class="synType">long</span> timestamp = <span class="synConstant">1371271256</span>;
  Date date = <span class="synStatement">new</span> Date(timestamp * <span class="synConstant">1000</span>);
  SimpleDateFormat sdf = <span class="synStatement">new</span> SimpleDateFormat(<span class="synConstant">"yyyy'-'MM'-'dd' 'HH':'mm':'ss"</span>);
  System.out.println(<span class="synConstant">"DATETIME = "</span> + sdf.format(date));
   }
}
<span class="synComment">// 結果</span>
<span class="synComment">// DATETIME = 2013-06-15 01:40:56</span>
</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>のまとめ</h5>

<ul>
<li>日付の処理はDateクラスを使う。</li>
<li>現在時刻のDateTime型はSimpleDateFormatクラスによりTimeStamp型から特定のFormatに従って変換する。</li>
<li>現在時刻のTimeStamp型はDateクラスのgetTime<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>でmillisecを取得し1000で割る。</li>
<li>文字列型からDate型への変換はSimpleDateFormatクラスのparse<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>を利用する。</li>
<li>long型のTimeStampをDate型に変換するにはDate<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>を生成する時の引数にlong型を指定する。</li>
</ul>
</div>
</blockquote>

</div>
<div class="section">
<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>のお話</h4>

<blockquote>
    <p>※結果の取得には<a class="keyword" href="http://d.hatena.ne.jp/keyword/SpiderMonkey">SpiderMonkey</a>を利用しています。</p>

<div class="section">
<h5>現在時刻のDateTime取得</h5>
<p>new Date()した<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>からget<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>により各種値を取得します。</p>
<pre class="hljs javascript" data-lang="javascript" data-unlink><span class="synIdentifier">var</span> date_format = <span class="synIdentifier">function</span>(num) <span class="synIdentifier">{</span>
<span class="synStatement">return</span> ( num < 10 ) ? <span class="synConstant">'0'</span> + num  : num;
<span class="synIdentifier">}</span>;
<span class="synIdentifier">var</span> d = <span class="synStatement">new</span> <span class="synType">Date</span>();
print( <span class="synConstant">"DATETIME = "</span> + d.getFullYear() + <span class="synConstant">'-'</span> + date_format( d.getMonth() + 1 ) + <span class="synConstant">'-'</span> + 
   date_format( d.getDate() )+ <span class="synConstant">' '</span> + date_format( d.getHours() ) + <span class="synConstant">':'</span> +
   date_format( d.getMinutes() ) + <span class="synConstant">':'</span> + date_format( d.getSeconds() ) );
<span class="synComment">// 結果</span>
<span class="synComment">// DATETIME = 2013-06-15 01:40:56</span>
</pre>
</div>
<div class="section">
<h5>現在時刻のTimeStamp取得</h5>
<p>new Date()した値を1000で割ってparseIntします。</p>
<pre class="hljs javascript" data-lang="javascript" data-unlink>print( <span class="synConstant">"TIMESTAMP = "</span> + parseInt( <span class="synStatement">new</span> <span class="synType">Date</span>() / 1000 ) );
<span class="synComment">// 結果</span>
<span class="synComment">// TIMESTAMP = 1371228238</span>
</pre>
</div>
<div class="section">
<h5>DateTime => TimeStamp変換</h5>
<p>DATETIME型の"-"を"/"に置換して文字列をDate.parse関数に掛けて最終的に1000で割ります。</p>
<pre class="hljs javascript" data-lang="javascript" data-unlink><span class="synIdentifier">var</span> datetime = <span class="synConstant">"2013-06-15 01:40:56"</span>;
print( <span class="synConstant">"TIMESTAMP = "</span> + <span class="synType">Date</span>.parse( datetime.replace( <span class="synConstant">/-/g</span>, <span class="synConstant">'/'</span>) ) / 1000 );
<span class="synComment">// 結果</span>
<span class="synComment">// TIMESTAMP = 1371228056</span>
</pre>
</div>
<div class="section">
<h5>TimeStamp => DateTime変換</h5>
<p>TIMESTAMPを1000倍した値をnew Date()に渡し、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>からget<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>で各種値を取得します。</p>
<pre class="hljs javascript" data-lang="javascript" data-unlink><span class="synIdentifier">var</span> date_format = <span class="synIdentifier">function</span>(num) <span class="synIdentifier">{</span>
<span class="synStatement">return</span> ( num < 10 ) ? <span class="synConstant">'0'</span> + num  : num;
<span class="synIdentifier">}</span>;
<span class="synIdentifier">var</span> timestamp = 1371228056;
<span class="synIdentifier">var</span> d = <span class="synStatement">new</span> <span class="synType">Date</span>(timestamp*1000);
print( <span class="synConstant">"DATETIME = "</span> + d.getFullYear() + <span class="synConstant">'-'</span> + date_format( d.getMonth() + 1 ) + <span class="synConstant">'-'</span> + 
   date_format( d.getDate() )+ <span class="synConstant">' '</span> + date_format( d.getHours() ) + <span class="synConstant">':'</span> +
   date_format( d.getMinutes() ) + <span class="synConstant">':'</span> + date_format( d.getSeconds() ) );
<span class="synComment">// 結果</span>
<span class="synComment">// DATETIME = 2013-06-15 01:40:56</span>
</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>のまとめ</h5>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>のDateTime/TimeStampの処理にはDateオブジェクトを利用する。Dateオブジェクトの利用だけだが、値の導き方がやや複雑。</li>
<li>現在時刻のDateTimeを取得するにはnew Date()により生成された<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>のget<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>を使用する。</li>
<li>現在時刻のTimeStampを取得するにはnew Date() / 1000した値をparseIntする。</li>
<li>DateTimeからTImeStampを取得するにはDateTimeの値の"/"を"-"に置換し、Date.parse関数に掛けて得られた値を1000で割る。</li>
<li>TimeStampからDateTimeを取得するにはTimeStampを1000倍した値をnew Date()に渡し、生成された<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>からget<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>で各種値を取得する。</li>
</ul>
</div>
</blockquote>

</div>
<div class="section">
<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/Perl">Perl</a>のお話</h4>

<blockquote>
    
<div class="section">
<h5>現在時刻のDateTime取得</h5>
<p>localtime関数で現在時刻のデータを取得し、strftimeでDateTime用のフォーマットに変換します。</p>
<pre class="hljs perl" data-lang="perl" data-unlink><span class="synPreProc">#!/bin/env perl</span>
<span class="synStatement">use strict</span>;
<span class="synStatement">use warnings</span>;
<span class="synStatement">use </span>POSIX <span class="synConstant">qw(strftime)</span>;
<span class="synStatement">my</span> <span class="synIdentifier">$date</span> = strftime( <span class="synConstant">"%Y-%m-%d %H:%M:%S"</span> , <span class="synStatement">localtime</span>());
<span class="synStatement">print</span> <span class="synConstant">"DATETIME = "</span> . <span class="synIdentifier">$date</span> . <span class="synConstant">"</span><span class="synSpecial">\n</span><span class="synConstant">"</span>;
<span class="synComment"># 結果</span>
<span class="synComment"># DATETIME = 2013-06-15 15:41:39</span>
</pre>
</div>
<div class="section">
<h5>現在時刻のTimeStamp取得</h5>
<p>TimeStampの取得は簡単でtimeを指定するだけです。</p>
<pre class="hljs perl" data-lang="perl" data-unlink><span class="synPreProc">#!/bin/env perl</span>
<span class="synStatement">use strict</span>;
<span class="synStatement">use warnings</span>;
<span class="synStatement">print</span> <span class="synConstant">"TIMESTAMP = "</span> . <span class="synStatement">time</span> . <span class="synConstant">"</span><span class="synSpecial">\n</span><span class="synConstant">"</span>;
<span class="synComment"># 結果</span>
<span class="synComment"># TIMESTAMP = 1371278499</span>
</pre>
</div>
<div class="section">
<h5>DateTime => TimeStamp変換</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Perl">Perl</a>には標準でstrptime関数が無いのでDateTime => TImeStampの変換に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%B5%B5%AC%C9%BD%B8%BD">正規表現</a>を使います。</p>
<pre class="hljs perl" data-lang="perl" data-unlink><span class="synPreProc">#!/bin/env perl</span>
<span class="synComment">#use DateTime;</span>
<span class="synComment">#use POSIX qw(strftime);</span>
<span class="synStatement">use strict</span>;
<span class="synStatement">use warnings</span>;
<span class="synStatement">use </span>Time::Local;
<span class="synStatement">my</span>(<span class="synIdentifier">$year</span>, <span class="synIdentifier">$month</span>, <span class="synIdentifier">$day</span>, <span class="synIdentifier">$hour</span>, <span class="synIdentifier">$minute</span>, <span class="synIdentifier">$second</span>);
<span class="synStatement">my</span> <span class="synIdentifier">$utime</span> = <span class="synConstant">"2013-06-15 15:41:39"</span>;
<span class="synIdentifier">$utime</span> =~ <span class="synStatement">m{</span><span class="synConstant">^</span><span class="synSpecial">\s*(\d</span><span class="synConstant">{1,4</span>}<span class="synSpecial">)\W*</span><span class="synConstant">0</span><span class="synSpecial">*(\d</span><span class="synConstant">{1,2</span>}<span class="synSpecial">)\W*</span><span class="synConstant">0</span><span class="synSpecial">*(\d</span><span class="synConstant">{1,2</span>}<span class="synSpecial">)\W*</span><span class="synConstant">0</span><span class="synSpecial">*</span>
<span class="synConstant">                 </span><span class="synSpecial">(\d</span><span class="synConstant">{0,2</span>}<span class="synSpecial">)\W*</span><span class="synConstant">0</span><span class="synSpecial">*(\d</span><span class="synConstant">{0,2</span>}<span class="synSpecial">)\W*</span><span class="synConstant">0</span><span class="synSpecial">*(\d</span><span class="synConstant">{0,2</span>}<span class="synSpecial">)</span><span class="synStatement">}x</span>; 
<span class="synIdentifier">$year</span> = <span class="synIdentifier">$1</span>;  <span class="synIdentifier">$month</span> = <span class="synIdentifier">$2</span>;   <span class="synIdentifier">$day</span> = <span class="synIdentifier">$3</span>;
<span class="synIdentifier">$hour</span> = <span class="synIdentifier">$4</span>;  <span class="synIdentifier">$minute</span> = <span class="synIdentifier">$5</span>;  <span class="synIdentifier">$second</span> = <span class="synIdentifier">$6</span>;
<span class="synIdentifier">$year</span> = (<span class="synIdentifier">$year</span><<span class="synConstant">100</span> ? (<span class="synIdentifier">$year</span><<span class="synConstant">70</span> ? <span class="synConstant">2000</span>+<span class="synIdentifier">$year</span> : <span class="synConstant">1900</span>+<span class="synIdentifier">$year</span>) : <span class="synIdentifier">$year</span>);
<span class="synStatement">print</span> <span class="synConstant">"TIMESTAMP = "</span> . timelocal(<span class="synIdentifier">$second</span>,<span class="synIdentifier">$minute</span>,<span class="synIdentifier">$hour</span>,<span class="synIdentifier">$day</span>,<span class="synIdentifier">$month</span>-<span class="synConstant">1</span>,<span class="synIdentifier">$year</span>) . <span class="synConstant">"</span><span class="synSpecial">\n</span><span class="synConstant">"</span>;
<span class="synComment"># 結果</span>
<span class="synComment"># TIMESTAMP = 1371278499</span>
</pre><p>strptimeを使ってもう少し奇麗に書きたい場合はDateTime::Format::Strptime、Time::Piecesを<a class="keyword" href="http://d.hatena.ne.jp/keyword/CPAN">CPAN</a>からintallして使います。DateTimeモジュールのinstallは依存関係が多くとても大変なのでTime::Piecesを使うと良いと思います。</p>
<pre class="hljs perl" data-lang="perl" data-unlink><span class="synPreProc">#!/bin/env perl</span>
<span class="synStatement">use strict</span>;
<span class="synStatement">use warnings</span>;
<span class="synStatement">use </span>DateTime::Format::Strptime;
<span class="synStatement">my</span> <span class="synIdentifier">$datetime</span> = <span class="synConstant">"2013-06-15 15:41:39"</span>;
<span class="synStatement">my</span> <span class="synIdentifier">$strp</span> = DateTime::Format::Strptime-> new( <span class="synConstant">pattern</span> => <span class="synConstant">'%Y-%m-%d %H:%M:%S'</span> );
<span class="synStatement">print</span> <span class="synConstant">"TIMESTAMP = "</span> . <span class="synIdentifier">$strp->parse_datetime</span>( <span class="synIdentifier">$datetime</span> )->epoch . <span class="synConstant">"</span><span class="synSpecial">\n</span><span class="synConstant">"</span>;
<span class="synComment"># 結果</span>
<span class="synComment"># TIMESTAMP = 1371310899</span>
</pre><pre class="hljs perl" data-lang="perl" data-unlink><span class="synPreProc">#!/bin/env perl</span>
<span class="synStatement">use strict</span>;
<span class="synStatement">use warnings</span>;
<span class="synStatement">use </span>Time::Piece;
<span class="synStatement">my</span> <span class="synIdentifier">$datetime</span> = <span class="synConstant">"2013-06-15 15:41:39"</span>;
<span class="synStatement">my</span> <span class="synIdentifier">$strp</span> = Time::Piece->strptime( <span class="synIdentifier">$datetime</span>, <span class="synConstant">'%Y-%m-%d %H:%M:%S'</span> );
<span class="synStatement">print</span> <span class="synConstant">"TIMESTAMP = "</span> . <span class="synIdentifier">$strp->epoch</span> . <span class="synConstant">"</span><span class="synSpecial">\n</span><span class="synConstant">"</span>;
<span class="synComment"># 結果</span>
<span class="synComment"># TIMESTAMP = 1371310899</span>
</pre>
</div>
<div class="section">
<h5>TimeStamp => DateTime変換</h5>
<p>localtime関数で指定TimeStampの時刻を取得し、strftimeでDateTime用のフォーマットに変換します。</p>
<pre class="hljs perl" data-lang="perl" data-unlink><span class="synPreProc">#!/bin/env perl</span>
<span class="synStatement">use strict</span>;
<span class="synStatement">use warnings</span>;
<span class="synStatement">use </span>POSIX <span class="synConstant">qw(strftime)</span>;
<span class="synStatement">my</span> <span class="synIdentifier">$utime</span> = <span class="synConstant">1371278499</span>;
<span class="synStatement">my</span> <span class="synIdentifier">$date</span> = strftime( <span class="synConstant">"%Y-%m-%d %H:%M:%S"</span> , <span class="synStatement">localtime</span>(<span class="synIdentifier">$utime</span>));
<span class="synStatement">print</span> <span class="synConstant">"DATETIME = "</span> . <span class="synIdentifier">$date</span> . <span class="synConstant">"</span><span class="synSpecial">\n</span><span class="synConstant">"</span>;
<span class="synComment"># 結果</span>
<span class="synComment"># DATETIME = 2013-06-15 15:41:39</span>
</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Perl">Perl</a>のまとめ</h5>

<ul>
<li>現在時刻のDateTimeを取得するには<a class="keyword" href="http://d.hatena.ne.jp/keyword/POSIX">POSIX</a>で定義されているstrftime()と標準で備わっているlocaltime()を利用する。</li>
<li>現在時刻のTimeStampを取得するにはtimeを指定する。</li>
<li>DateTimeからTimeStampへの変換は3種類の方法がある。
<ul>
<li>1.<a class="keyword" href="http://d.hatena.ne.jp/keyword/Perl">Perl</a>にはstrptime関数が標準で備わっていないので、DateTime型を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%B5%B5%AC%C9%BD%B8%BD">正規表現</a>でparseしてyear,month,dayなどの各項目を切り出し、timelocal関数でTimeStampを取得する。</li>
<li>2.DateTime::Format::Strptimeをinstallする。DateTime::Format::Strptimeをuseしてnewの際にDateTimeのFormatを指定する。DateTime::Format::Strptimeのparse_datetime<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>とepochプロパティを利用してTimeStampを取得する。※DateTimeは<a class="keyword" href="http://d.hatena.ne.jp/keyword/CPAN">CPAN</a>からinstallするのが少し大変なのであまりお勧めはしない。</li>
<li>3.Time::Pieceをinstallする。Time::Pieceをuseしてstrptime<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>でDateTimeのFormatを指定する。strptime<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>で取得した値のepochプロパティを参照してTimeStampを取得する。</li>
</ul></li>
<li>TimeStampからDateTimeを取得するには<a class="keyword" href="http://d.hatena.ne.jp/keyword/POSIX">POSIX</a>で定義されているstrftime()と標準で備わっているlocaltime()を利用する。</li>
</ul>
</div>
</blockquote>

</div>
<div class="section">
<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>のお話</h4>

<blockquote>
    
<div class="section">
<h5>現在時刻のDateTime取得</h5>
<p>date/strftime関数で出力するDateTimeのFormatを指定します。</p>
<pre class="hljs php" data-lang="php" data-unlink><span class="synSpecial"><?php</span>
<span class="synPreProc">echo</span> "<span class="synConstant">DATETIME = </span>" <span class="synStatement">.</span> <span class="synIdentifier">date</span><span class="synSpecial">(</span>"<span class="synConstant">Y-m-d H:i:s</span>"<span class="synSpecial">)</span> <span class="synStatement">.</span> "<span class="synSpecial">\n</span>";
<span class="synPreProc">echo</span> "<span class="synConstant">DATETIME = </span>" <span class="synStatement">.</span> <span class="synIdentifier">strftime</span><span class="synSpecial">(</span>"<span class="synConstant">%Y-%m-%d %H:%M:%S</span>"<span class="synSpecial">)</span> <span class="synStatement">.</span> "<span class="synSpecial">\n</span>";
<span class="synComment"># 結果</span>
<span class="synComment"># DATETIME = 2013-06-15 17:39:09</span>
</pre>
</div>
<div class="section">
<h5>現在時刻のTimeStamp取得</h5>
<p>time関数を使用します。</p>
<pre class="hljs php" data-lang="php" data-unlink><span class="synSpecial"><?php</span>
<span class="synPreProc">echo</span> "<span class="synConstant">TIMESTAMP = </span>" <span class="synStatement">.</span> <span class="synIdentifier">time</span><span class="synSpecial">()</span> <span class="synStatement">.</span> "<span class="synSpecial">\n</span>";
<span class="synComment"># 結果</span>
<span class="synComment"># TIMESTAMP = 1371285686</span>
</pre>
</div>
<div class="section">
<h5>DateTime => TimeStamp変換</h5>
<p>strtotime関数を使用します。</p>
<pre class="hljs php" data-lang="php" data-unlink><span class="synSpecial"><?php</span>
<span class="synStatement">$</span><span class="synIdentifier">datetime</span> <span class="synStatement">=</span> "<span class="synConstant">2013-06-15 17:39:09</span>";
<span class="synPreProc">echo</span> "<span class="synConstant">TIMESTAMP = </span>" <span class="synStatement">.</span> <span class="synIdentifier">strtotime</span><span class="synSpecial">(</span> <span class="synStatement">$</span><span class="synIdentifier">datetime</span> <span class="synSpecial">)</span> <span class="synStatement">.</span> "<span class="synSpecial">\n</span>";
<span class="synComment"># 結果</span>
<span class="synComment"># TIMESTAMP = 1371285549</span>
</pre>
</div>
<div class="section">
<h5>TimeStamp => DateTime変換</h5>
<p>date/strftime関数の第二引数にTimeStampを指定し、第一引数で出力するDateTimeのFormatを指定します。</p>
<pre class="hljs php" data-lang="php" data-unlink><span class="synSpecial"><?php</span>
<span class="synStatement">$</span><span class="synIdentifier">utime</span> <span class="synStatement">=</span> <span class="synConstant">1371285549</span>;
<span class="synPreProc">echo</span> "<span class="synConstant">DATETIME = </span>" <span class="synStatement">.</span> <span class="synIdentifier">date</span><span class="synSpecial">(</span> "<span class="synConstant">Y-m-d H:i:s</span>", <span class="synStatement">$</span><span class="synIdentifier">utime</span> <span class="synSpecial">)</span> <span class="synStatement">.</span> "<span class="synSpecial">\n</span>";
<span class="synPreProc">echo</span> "<span class="synConstant">DATETIME = </span>" <span class="synStatement">.</span> <span class="synIdentifier">strftime</span><span class="synSpecial">(</span>"<span class="synConstant">%Y-%m-%d %H:%M:%S</span>", <span class="synStatement">$</span><span class="synIdentifier">utime</span> <span class="synSpecial">)</span> <span class="synStatement">.</span> "<span class="synSpecial">\n</span>";
<span class="synComment"># 結果</span>
<span class="synComment"># DATETIME = 2013-06-15 17:39:09</span>
</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>のまとめ</h5>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>のDateTIme/TimeStamp処理は標準関数でできるのでとても楽。</li>
<li>現在時刻のDateTimeを取得するにはdate/strftime関数を使用する。</li>
<li>現在時刻のTimeStampを取得するにはtime関数を使用する。</li>
<li>DateTimeからTimeStampを取得するにはstrtotime関数を使用する。</li>
<li>TimeStampからDateTimeを取得するにはdate/strftime関数を使用する。</li>
</ul>
</div>
</blockquote>

</div>
<div class="section">
<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>のお話</h4>

<blockquote>
    
<div class="section">
<h5>現在時刻のDateTime取得</h5>
<p>datetimeをimportしてstrftimeにてDateTimeのFormatを指定します。</p>
<pre class="hljs python" data-lang="python" data-unlink><span class="synComment">#! /usr/bin/env python</span>
<span class="synComment"># -*- coding:utf-8 -*-</span>
<span class="synPreProc">from</span> datetime <span class="synPreProc">import</span> *
<span class="synIdentifier">print</span> <span class="synConstant">"DATETIME = "</span> + datetime.now().strftime( <span class="synConstant">'%Y-%m-%d %H:%M:%S'</span> )
<span class="synComment"># 結果</span>
<span class="synComment"># DATETIME = 2013-06-15 17:56:56</span>
</pre>
</div>
<div class="section">
<h5>現在時刻のTimeStamp取得</h5>
<p>timeをimportしてint(time())でTimeStampを取得します。</p>
<pre class="hljs python" data-lang="python" data-unlink><span class="synComment">#! /usr/bin/env python</span>
<span class="synComment"># -*- coding:utf-8 -*-</span>
<span class="synPreProc">from</span> time <span class="synPreProc">import</span> time
<span class="synIdentifier">print</span> <span class="synConstant">"TIMESTAMP = "</span> + <span class="synIdentifier">str</span>(<span class="synIdentifier">int</span>(time()))
<span class="synComment"># 結果</span>
<span class="synComment"># TIMESTAMP = 1371286393</span>
</pre>
</div>
<div class="section">
<h5>DateTime => TimeStamp変換</h5>
<p>datetime/timeをimportしてdatetimeにてDateTime型のFormatを指定し、time.mktimeでTimeStampを取得します。</p>
<pre class="hljs python" data-lang="python" data-unlink><span class="synComment">#! /usr/bin/env python</span>
<span class="synComment"># -*- coding:utf-8 -*-</span>
<span class="synPreProc">from</span> datetime <span class="synPreProc">import</span> *
<span class="synPreProc">import</span> time
dtime = <span class="synConstant">"2013-06-15 17:53:13"</span>
<span class="synIdentifier">print</span> <span class="synConstant">"TIMESTAMP = "</span> + <span class="synIdentifier">str</span>( <span class="synIdentifier">int</span>( time.mktime( datetime.strptime( dtime, <span class="synConstant">"%Y-%m-%d %H:%M:%S"</span> ).timetuple() ) ) ) 
<span class="synComment"># 結果</span>
<span class="synComment"># TIMESTAMP = 1371286393</span>
</pre>
</div>
<div class="section">
<h5>TimeStamp => DateTime変換</h5>
<p>datetimeをimportしてfromtimestamp関数でDateTimeに変換します。</p>
<pre class="hljs python" data-lang="python" data-unlink><span class="synComment"># -*- coding:utf-8 -*-</span>
<span class="synPreProc">from</span> datetime <span class="synPreProc">import</span> *
utime = <span class="synConstant">1371286393</span>
<span class="synIdentifier">print</span> <span class="synConstant">"DATETIME = "</span> + <span class="synIdentifier">str</span>( datetime.fromtimestamp( utime ) ) 
<span class="synComment"># 結果</span>
<span class="synComment"># DATETIME = 2013-06-15 17:53:13</span>
</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>のまとめ</h5>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>はimportしたmoduleの組み合わせが複雑でDateTime/TimeStampの処理がやや複雑になる。</li>
<li>現在時刻のDateTimeを取得するにはdatetimeをimportしてstrftime<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>でDateTimeのFormatを指定する。</li>
<li>現在時刻のTimeStampを取得するにはtimeをimportしてtime関数のintを指定する。</li>
<li>DateTimeからTimeStampを取得するにはdatetime,timeをimportして指定したDateTimeのFormatをparseしてmktimeにてTimeStampに変換しintを指定する。</li>
<li>TimeStampからDateTimeを取得するにはdatetimeをimportしてfromtimestamp関数で変換する。</li>
</ul>
</div>
</blockquote>

</div>
<div class="section">
<h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>のお話</h4>

<blockquote>
    <p><span class="deco" style="color:#FF0000;">※2013/07/20修正：774さんから頂いたTime.parse()意外はrequire "time"が不要でした。</span><br />
</p>

<div class="section">
<h5>現在時刻のDateTime取得</h5>
<p><del datetime="2013-07-20T01:38:40+09:00">timeをrequireして</del>strftime<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>でDateTimeのFormatを指定します。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>
<span class="synComment"># require "time"</span>
puts <span class="synSpecial">"</span><span class="synConstant">DATETIME = </span><span class="synSpecial">"</span> + ( <span class="synType">Time</span>.now.strftime <span class="synSpecial">"</span><span class="synConstant">%Y-%m-%d %H:%M:%S</span><span class="synSpecial">"</span> )
<span class="synComment"># 結果</span>
<span class="synComment"># DATETIME = 2013-06-15 16:59:11</span>
</pre>
</div>
<div class="section">
<h5>現在時刻のTimeStamp取得</h5>
<p><del datetime="2013-07-20T01:38:40+09:00">timeをrequireして</del>now.to_i<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>でTimeStampを取得します。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>
<span class="synComment"># require "time"</span>
puts <span class="synSpecial">"</span><span class="synConstant">TIMESTAMP = </span><span class="synSpecial">"</span> + <span class="synType">Time</span>.now.to_i.to_s
<span class="synComment"># 結果</span>
<span class="synComment"># TIMESTAMP = 1371283340</span>
</pre>
</div>
<div class="section">
<h5>DateTime => TimeStamp変換</h5>
<p>timeをrequireしてparse<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>で指定したDateTime型をto_i<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>でTimeStamp型に変換します。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>
<span class="synPreProc">require</span> <span class="synSpecial">"</span><span class="synConstant">time</span><span class="synSpecial">"</span>
datetime = <span class="synSpecial">"</span><span class="synConstant">2013-06-15 16:59:11</span><span class="synSpecial">"</span>
puts <span class="synSpecial">"</span><span class="synConstant">TIMESTAMP = </span><span class="synSpecial">"</span> + <span class="synType">Time</span>.parse(datetime).to_i.to_s
<span class="synComment"># 結果</span>
<span class="synComment"># TIMESTAMP = 1371283151</span>
</pre>
</div>
<div class="section">
<h5>TimeStamp => DateTime変換</h5>
<p><del datetime="2013-07-20T01:38:40+09:00">timeをrequireして</del>at<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>にTimeStamp型を渡し、strftimeで指定したDateTime型に変換します。</p>
<pre class="hljs ruby" data-lang="ruby" data-unlink><span class="synPreProc">#!/bin/env ruby</span>
<span class="synComment"># -*- encoding: utf-8 -*-</span>
<span class="synComment"># require "time"</span>
utime = <span class="synConstant">1371283340</span>
puts <span class="synSpecial">"</span><span class="synConstant">DATETIME = </span><span class="synSpecial">"</span> + ( <span class="synType">Time</span>.at(utime).strftime <span class="synSpecial">"</span><span class="synConstant">%Y-%m-%d %H:%M:%S</span><span class="synSpecial">"</span> )
<span class="synComment"># 結果</span>
<span class="synComment"># DATETIME = 2013-06-15 17:02:20</span>
</pre>
</div>
<div class="section">
<h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>のまとめ</h5>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>はtimeのrequireだけでDateTime/TimeStampの処理が簡単に出来る。</li>
<li>現在時刻のDateTimeはTimeのstrftimeで指定したFormatで取得する。</li>
<li>現在時刻のTimeStampはTimeのto_i<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>で取得する。</li>
<li>DateTimeからTimeStampを取得するにはTimeのparse<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>に指定したDateTIme型をto_i<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>でTimeStamp型に変換する。</li>
<li>TimeStampからDateTimeを取得するにはTimeのat<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>に指定したTimeStamp型をstrftime<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>で指定したFormatのDateTimeに変換する。</li>
</ul>
</div>
</blockquote>
<p><div class="amazlet-box"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873113946/yutakikuchi-22/"><img src="http://ecx.images-amazon.com/images/I/41CGDEMgyoL._SL160_.jpg" class="hatena-asin-detail-image" alt="プログラミング言語 Ruby" title="プログラミング言語 Ruby"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873113946/yutakikuchi-22/">プログラミング言語 Ruby</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%DE%A4%C4%A4%E2%A4%C8%A4%E6%A4%AD%A4%D2%A4%ED">まつもとゆきひろ</a>,David Flanagan,卜部昌平(監訳),長尾高弘</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%E9%A5%A4%A5%EA%A1%BC%A5%B8%A5%E3%A5%D1%A5%F3">オライリージャパン</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2009/01/26</li><li><span class="hatena-asin-detail-label">メディア:</span> 大型本</li><li><span class="hatena-asin-detail-label">購入</span>: 21人 <span class="hatena-asin-detail-label">クリック</span>: 356回</li><li><a href="http://d.hatena.ne.jp/asin/4873113946/yutakikuchi-22" target="_blank">この商品を含むブログ (123件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

</div>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://yutakikuchi.github.io/post/201306100845/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://yutakikuchi.github.io/post/201306100845/">MongoDBのAggregation Framework/MapReduceを使ってより賢く集計を行うためのまとめ</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://yutakikuchi.github.io/post/201307030856/">【進撃の巨大データ】自作ApacheModuleとRedisでWebBrowserを一つ残らずUnique管理する</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://yutakikuchi.github.io/post/201307030856/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="https://yutakikuchi.github.io/js/ui.js"></script>
<script src="https://yutakikuchi.github.io/js/menus.js"></script>


<script>
  
  if (window.location.hostname != "localhost") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-20616165-3', 'auto');
    ga('send', 'pageview');
  }
</script>





</body>
</html>

